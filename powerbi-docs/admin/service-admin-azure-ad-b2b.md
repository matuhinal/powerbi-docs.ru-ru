---
title: Предоставление содержимого внешним гостевым пользователям с помощью Azure AD B2B
description: Power BI позволяет совместно использовать содержимое с внешними гостевыми пользователями через Azure Active Directory "бизнес-бизнес" (Azure AD B2B).
author: kfollis
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: how-to
ms.date: 07/02/2020
ms.author: kfollis
LocalizationGroup: Administration
ms.openlocfilehash: 17c19fbdf1c5057d287f50531f2b679a19e3a30e
ms.sourcegitcommit: 561f6de3e4621d9d439dd54fab458ddca78ace2c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2020
ms.locfileid: "85939457"
---
# <a name="distribute-power-bi-content-to-external-guest-users-with-azure-ad-b2b"></a>Предоставление содержимого Power BI внешним гостевым пользователям с помощью Azure AD B2B

Power BI позволяет совместно использовать содержимое с внешними гостевыми пользователями через Azure Active Directory "бизнес-бизнес" (Azure AD B2B). С помощью Azure AD B2B ваша организация делает возможной совместную работу с внешними пользователями и управляет ей в едином расположении. По умолчанию у внешних гостей есть только возможность использования данных. Кроме того вы можете разрешить гостевым пользователям за пределами вашей организации редактировать содержимое в вашей организации и управлять им.

В этой статье приводятся общие сведения о службе Azure AD B2B в Power BI. Дополнительные сведения см. в разделе [Распространение содержимого Power BI для сторонних гостевых пользователей с помощью Azure Active Directory B2B](../guidance/whitepaper-azure-b2b-power-bi.md).

## <a name="enable-access"></a>Предоставление доступа

Прежде чем приглашать гостевых пользователей, обязательно включите функцию [Предоставление внешним пользователям общего доступа к содержимому](service-admin-portal.md#export-and-sharing-settings) на портале администрирования Power BI. Даже если эта функция включена, чтобы приглашать гостевых пользователей, необходима роль "Приглашающий гостей" в Azure Active Directory.

Функция [Разрешение внешним гостям отслеживать и изменять содержимое в организации](service-admin-portal.md#allow-external-guest-users-to-edit-and-manage-content-in-the-organization) позволяет предоставить пользователям-гостям возможность просматривать и создавать содержимое в рабочих областях, включая просмотр данных Power BI в вашей организации.

> [!NOTE]
> Параметр [Предоставление внешним пользователям общего доступа к содержимому](service-admin-portal.md#export-and-sharing-settings) определяет, можно ли приглашать внешних пользователей в вашу организацию с помощью Power BI. После того как внешний пользователь примет приглашение, он станет гостевым пользователем Azure AD B2B в вашей организации. Гостевые пользователи отображаются в средствах выбора людей с помощью интерфейса Power BI. Если этот параметр отключен, существующие гостевые пользователи в вашей организации будут иметь доступ ко всем элементам, к которым у них уже есть доступ, и по-прежнему будут отображаться в средстве выбора людей. Кроме того, если гости добавляются с помощью[ запланированных приглашений](#planned-invites), они также будут отображаться в средствах выбора людей. Чтобы предотвратить доступ гостевых пользователей к Power BI, используйте политику условного доступа Azure AD.

## <a name="who-can-you-invite"></a>Кого вы можете пригласить?

Функция приглашения гостевых пользователей поддерживается для большинства адресов электронной почты, в том числе личных учетных записей gmail.com, outlook.com и hotmail.com. В Azure AD B2B такие адреса называются *удостоверениями социальных сетей*.

Приглашать пользователей, связанных с облаком для государственных организаций, например [Power BI для государственных организаций США](service-govus-overview.md), нельзя.

## <a name="invite-guest-users"></a>Приглашение гостевых пользователей

Гостевым пользователям требуется приглашение только в первый раз. Чтобы пригласить пользователей, используйте запланированные или несистематические приглашения.

Чтобы использовать несистематические приглашения, используйте следующие возможности.

* совместное использование отчетов и панелей мониторинга;
* список доступа к приложениям.

Отправка несистематических приглашений не поддерживается в списках доступа к рабочей области. Используйте [запланированные приглашения](#planned-invites), чтобы добавить таких пользователей в организацию. Когда внешний пользователь станет гостем в вашей организации, добавьте его в список доступа к рабочей области.

### <a name="planned-invites"></a>Плановые приглашения

Используйте плановое приглашение, если знаете, каких пользователей нужно пригласить. Вы можете отправлять приглашения с помощью портала Azure или PowerShell. Чтобы приглашать пользователей, необходимо получить роль администратора пользователей.

Чтобы отправить приглашение на портале Azure, выполните следующие действия.

1. На [портале Azure](https://portal.azure.com)выберите **Azure Active Directory**.

1. В разделе **Управление** выберите **Пользователи** > **Все пользователи** > **Новый гостевой пользователь**.

    ![Снимок экрана: портал Azure с выделенным вариантом "Новый гостевой пользователь".](media/service-admin-azure-ad-b2b/azure-ad-portal-new-guest-user.png)

1. Введите **адрес электронной почты** и **личное сообщение**.

    ![Снимок экрана: портал Azure с открытым диалоговым окном "Новый гостевой пользователь".](media/service-admin-azure-ad-b2b/azure-ad-portal-invite-message.png)

1. Выберите **Пригласить**.

Чтобы пригласить нескольких гостевых пользователей, используйте PowerShell или создайте массовое приглашение в Azure AD. Чтобы использовать PowerShell для массового приглашения, выполните действия, описанные в [учебнике по массовому приглашению пользователей службы совместной работы Azure AD B2B с помощью PowerShell](/azure/active-directory/b2b/bulk-invite-powershell/). Чтобы использовать для массового приглашения портал Azure, выполните действия, описанные в [учебнике по массовому приглашению пользователей службы совместной работы Azure Active Directory B2B](/azure/active-directory/b2b/tutorial-bulk-invite/).

В полученном электронном письме с приглашением гостевому пользователю нужно выбрать **Приступить к работе**. Гостевой пользователь будет добавлен в организацию.

![Снимок экрана: электронное приглашение для гостевого пользователя](media/service-admin-azure-ad-b2b/guest-user-invite-email.png)

### <a name="ad-hoc-invites"></a>Внеплановые приглашения

Чтобы пригласить внешнего пользователя, добавьте его на панель мониторинга или в отчет через функцию общего доступа или в приложение через страницу доступа. Ниже приведен пример того, что нужно сделать, чтобы пригласить внешнего пользователя для работы с приложением.

![Снимок экрана: добавление внешнего пользователя в список доступа к приложению в Power BI](media/service-admin-azure-ad-b2b/power-bi-app-access.png)

Гостевой пользователь получит электронное сообщение о том, что вы предоставили ему общий доступ к приложению.

![Снимок экрана: электронное сообщение о предоставлении гостевому пользователю доступа к приложению](media/service-admin-azure-ad-b2b/guest-user-invite-email-2.png)

Гостевой пользователь должен войти с использованием организационного адреса электронной почты. После входа он увидит предложение принять приглашение. В случае согласия для гостевого пользователя откроется приложение. Чтобы вернуться в приложение, пользователю следует добавить ссылку в закладки или сохранить письмо.

## <a name="licensing"></a>Лицензирование

Для просмотра содержимого, к которому предоставлен общий доступ, гостевому пользователю понадобится соответствующая лицензия. Существует три варианта предоставить ему нужную лицензию: использовать Power BI Premium, назначить лицензию Power BI Pro или использовать лицензию Power BI Pro гостевого пользователя.

[Гостевые пользователи, которые могут изменять содержимое в организации и управлять им](service-admin-portal.md#allow-external-guest-users-to-edit-and-manage-content-in-the-organization), нуждаются в лицензии Power BI Pro для внесения содержимого в рабочие области или совместного использования содержимого с другими пользователями.

### <a name="use-power-bi-premium"></a>Использование Power BI Premium

Если вы назначите для рабочей области [емкость Power BI Premium](service-premium-what-is.md), гостевой пользователь сможет работать с приложением без отдельной лицензии Power BI Pro. Power BI Premium также позволяет воспользоваться и другими возможностями для приложений, такими как частые обновления, выделенные емкости и крупные модели.

![Схема взаимодействия с гостевым пользователем при использовании Power BI Premium.](media/service-admin-azure-ad-b2b/license-approach-1.png)

### <a name="assign-a-power-bi-pro-license-to-guest-user"></a>Назначение гостевому пользователю лицензии Power BI Pro

Назначив гостевому пользователю лицензию Power BI Pro из организации, вы разрешите ему просматривать содержимое, для которого предоставлен общий доступ. Дополнительные сведения о назначении лицензий см. в разделе [Назначение лицензий пользователям на странице "Лицензии"](/office365/admin/manage/assign-licenses-to-users#assign-licenses-to-users-on-the-licenses-page). Прежде чем назначать лицензии Pro гостевым пользователям, обратитесь на свой [сайт с условиями использования продуктов](https://www.microsoft.com/licensing/terms) и убедитесь в том, что вы не нарушаете условия соглашения с Майкрософт.

![Схема взаимодействия с гостевым пользователем при использовании лицензии Pro из клиента.](media/service-admin-azure-ad-b2b/license-approach-2.png)

### <a name="guest-user-brings-their-own-power-bi-pro-license"></a>Применение лицензии Power BI Pro гостевого пользователя

Возможно, у гостевого пользователя уже есть лицензия Power BI Pro, которую ему назначили в его организации.

![Схема взаимодействия с гостевым пользователем при использовании собственных лицензий.](media/service-admin-azure-ad-b2b/license-approach-3.png)

## <a name="guest-users-who-can-edit-and-manage-content"></a>Гостевые пользователи, которые могут редактировать содержимое и управлять им

При использовании параметра [Разрешение внешним гостям отслеживать и изменять содержимое в организации](service-admin-portal.md#allow-external-guest-users-to-edit-and-manage-content-in-the-organization) указанные гостевые пользователи получают дополнительный доступ к Power BI вашей организации. Разрешенные гости могут просматривать любое содержимое, на которое у них есть разрешение, открывать главную страницу, просматривать рабочие области, устанавливать приложения, определять, для каких элементов они включены в список доступа, а также вносить содержимое в рабочие области. Они могут создавать или администрировать рабочие области, использующие новые возможности взаимодействия. Применяются некоторые ограничения. Они перечислены в разделе "Рекомендации и ограничения".

Чтобы помочь разрешенным гостям войти в Power BI, предоставьте им URL-адрес клиента. Чтобы найти URL-адрес клиента, выполните указанные ниже действия.

1. В службе Power BI в меню заголовка выберите справку ( **?** ), а затем — **О Power BI**.

2. Найдите значение рядом с полем **URL-адрес клиента**. Поделитесь URL-адресом клиента с разрешенными гостевыми пользователями.

    ![Снимок экрана: диалоговое окно сведений о Power BI с выделенным URL-адресом для гостевого пользователя.](media/service-admin-azure-ad-b2b/power-bi-about-dialog.png)

## <a name="considerations-and-limitations"></a>Рекомендации и ограничения

* По умолчанию внешние гостевые пользователи Azure AD B2B могут только использовать содержимое. Внешние гостевые пользователи Azure AD B2B могут просматривать приложения, панели мониторинга и отчеты, экспортировать данные, а также создавать подписки по электронной почте на панели мониторинга и отчеты. Они не могут использовать рабочие области и публиковать собственное содержимое. Чтобы убрать эти ограничения, можно использовать функцию [Разрешение внешним гостям отслеживать и изменять содержимое в организации](service-admin-portal.md#allow-external-guest-users-to-edit-and-manage-content-in-the-organization).

* Чтобы приглашать гостевых пользователей, требуется лицензия Power BI Pro. Пользователи пробной версии Pro не могут приглашать гостевых пользователей в Power BI.

* Некоторые возможности недоступны для [гостевых пользователей, которые могут изменять и администрировать содержимое](service-admin-portal.md#allow-external-guest-users-to-edit-and-manage-content-in-the-organization)Организации. Чтобы изменять или публиковать отчеты, гостевым пользователям нужно использовать службу Power BI, в том числе функцию "Получить данные" для отправки файлов Power BI Desktop.  Следующие возможности не поддерживаются:
  * Прямая публикация из Power BI Desktop в службу Power BI.
  * Гостевые пользователи не могут использовать Power BI Desktop для подключения к наборам данных службы в службе Power BI.
  * Классические рабочие области привязаны к группам Microsoft 365.
    * Гостевые пользователи не могут создавать или администрировать эти рабочие области.
    * Гостевой пользователь может быть их членом.
  * Отправка внеплановых приглашений не поддерживается для списков доступа к рабочей области.
  * Power BI Publisher для Excel не поддерживается для гостевых пользователей.
  * Гостевые пользователи не могут устанавливать Power BI Gateway и подключать его к вашей организации.
  * Гостевые пользователи не могут устанавливать приложения с публикацией для всей организации.
  * Гостевые пользователи не могут использовать, создавать, изменять или устанавливать пакеты содержимого организации.
  * Гостевые пользователи не могут использовать анализ в Excel.
  * Гостевые пользователи не могут упоминаться в комментариях (@mentioned).
  * Гостевые пользователи не могут использовать подписки.
  * Гостевые пользователи, использующие эту возможность, должны иметь рабочую или учебную учетную запись.

* Для гостевых пользователей с удостоверениями в социальных сетях действуют дополнительные ограничения, связанные со входом.
  * Они могут использовать интерфейс работы со службой Power BI через веб-браузер.
  * Они не могут пользоваться приложениями Power BI Mobile.
  * Они не смогут войти в систему, если требуется рабочая или учебная учетная запись.

* Этот компонент сейчас недоступен в веб-части отчетов SharePoint Online в Power BI.

* Существуют параметры Azure Active Directory, позволяющие ограничивать деятельность внешних гостевых пользователей в рамках всей организации. Эти параметры также применимы и к вашей среде Power BI. Эти параметры описаны в следующей документации:
  * [Управление параметрами внешнего взаимодействия](/azure/active-directory/b2b/delegate-invitations#configure-b2b-external-collaboration-settings)
  * [Разрешение или запрет приглашений для пользователей B2B из определенных организаций](https://docs.microsoft.com/azure/active-directory/b2b/allow-deny-list)
  * [Использование условного доступа для разрешения или запрета доступа](/azure/active-directory/conditional-access/concept-conditional-access-cloud-apps)

* Вы можете предоставлять общий доступ к содержимому из облака государственных организаций, например GCC, внешним пользователям коммерческого облака. Однако гостевой пользователь не сможет использовать собственную лицензию. Чтобы обеспечить доступ, содержимое должно быть в емкости, назначенной уровню "Премиум". Кроме того, гостевой учетной записи можно назначить лицензию Power BI Pro.

* Совместное использование за пределами организации не поддерживается для национальных облаков, например в случае экземпляров облака для Германии или Китая. Вместо этого создайте в организации учетные записи пользователей, которые внешние пользователи смогут использовать для доступа к содержимому.

* Если вы напрямую делитесь содержимым с гостевым пользователем, Power BI отправит ему сообщение электронной почты со ссылкой. Чтобы избежать отправки сообщения электронной почты, добавьте гостевого пользователя в группу безопасности и поделитесь содержимым с этой группой.  

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения, включая сведения о безопасности на уровне строк, см. в техническом документе о [предоставлении содержимого Power BI внешним гостевым пользователям с помощью Azure AD B2B](https://aka.ms/powerbi-b2b-whitepaper)

Сведения об Azure AD B2B см. в статье [Что представляет собой гостевой доступ в службе совместной работы Azure Active Directory B2B?](/azure/active-directory/active-directory-b2b-what-is-azure-ad-b2b/)
