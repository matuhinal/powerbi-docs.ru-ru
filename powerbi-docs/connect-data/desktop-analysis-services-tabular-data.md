---
title: Подключение к табличным данным служб Analysis Services в Power BI Desktop
description: 'В Power BI Desktop есть два способа подключения и получения данных из табличных моделей служб SQL Server Analysis Services: просмотр в режиме интерактивного подключения и выбор элементов и их импорт в Power BI Desktop.'
author: davidiseminger
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: how-to
ms.date: 01/28/2020
ms.author: davidi
LocalizationGroup: Connect to data
ms.openlocfilehash: bb55342974bcd64e7d5871b7b84977105b7467fa
ms.sourcegitcommit: 9350f994b7f18b0a52a2e9f8f8f8e472c342ea42
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90858699"
---
# <a name="connect-to-analysis-services-tabular-data-in-power-bi-desktop"></a>Подключение к табличным данным служб Analysis Services в Power BI Desktop
С помощью Power BI Desktop можно подключиться к табличным моделям служб SQL Server Analysis Services и получить данные из этих моделей двумя способами. Вы можете просмотреть данные в режиме интерактивного подключения или выбрать элементы и импортировать их в Power BI Desktop.

Давайте рассмотрим это более подробно.

**Просмотр в режиме интерактивного подключения**. Когда используется интерактивное подключение, элементы в табличной модели или перспективе, такие как таблицы, столбцы и меры, отображаются в списке **Поля** Power BI Desktop. Средства расширенной визуализации и создания отчетности Power BI Desktop позволяют просматривать табличную модель новым, высокоинтерактивным способом.

В режиме интерактивного подключения данные из табличной модели не импортируются в Power BI Desktop. При взаимодействии пользователя с визуализацией Power BI Desktop запрашивает табличную модель и вычисляет отображаемые результаты. Пользователь всегда видит самые последние данные, доступные в табличной модели, либо с момента последней обработки, либо из таблиц прямых запросов, доступных в табличной модели. 

Имейте в виду, что табличные модели имеют высокий уровень безопасности. Какие именно элементы могут быть отображены в Power BI Desktop определяется разрешениями для той табличной модели, к которой подключен пользователь.

Чтобы предоставить общий доступ к созданным в Power BI Desktop динамическим отчетам, необходимо опубликовать их на сайте Power BI. Чтобы опубликовать файл Power BI Desktop в режиме активного подключения к табличной модели на сайте Power BI, администратору следует установить и настроить локальный шлюз данных. Дополнительные сведения см. в статье [Локальный шлюз данных](service-gateway-onprem.md).

**Выбор элементов и их импорт в Power BI Desktop**. При таком режиме подключения можно выбрать в табличной модели или перспективе такие элементы, как таблицы, столбцы и меры, и загрузить их в модель Power BI Desktop. Используйте редактор Power Query в Power BI Desktop, чтобы дополнительно упорядочить данные, и примените его возможности для дальнейшего моделирования данных. Поскольку интерактивное подключение между Power BI Desktop и табличной моделью не поддерживается, можно исследовать модель Power BI Desktop в автономном режиме или опубликовать на сайте Power BI.

## <a name="to-connect-to-a-tabular-model"></a>Подключение к табличной модели
1. В Power BI Desktop на вкладке **Главная** выберите **Получить данные** > **Дополнительно** > **База данных**.
   
1. Выберите пункт **База данных SQL Server Analysis Services** и нажмите кнопку **Подключиться**.
   
   ![Выберите базу данных служб SQL Server Analysis Services](media/desktop-analysis-services-tabular-data/pbid_sqlas_getdata_as.png)
3. В окне **База данных SQL Server Analysis Services** введите имя **сервера**, выберите режим подключения, а затем выберите **ОК**.
   
   ![Окно "База данных SQL Server Analysis Services"](media/desktop-analysis-services-tabular-data/pbid_sqlas_getdata_as_server.png)
4. Этот шаг в окне **Навигатор** зависит от выбранного режима подключения.

   - В режиме интерактивного подключения выберите табличную модель или перспективу.
  
      ![Выберите в навигаторе табличную модель или перспективу](media/desktop-analysis-services-tabular-data/pbid_sqlas_getdata_as_live.png)
   - Если вы решили выбрать элементы и получить данные, выберите табличную модель или перспективу, а затем выберите определенную таблицу или столбец для загрузки. Чтобы сформировать данные перед загрузкой, выберите команду **Изменить запросы**, чтобы открыть редактор Power Query. Когда все будет готово, нажмите кнопку **Загрузить** для импорта данных в Power BI Desktop.

      ![Выберите в навигаторе таблицу или столбец для загрузки](media/desktop-analysis-services-tabular-data/pbid_sqlas_getdata_as_select.png)

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы
**Вопрос.** Нужен ли мне локальный шлюз данных?

**Ответ.** Это зависит от обстоятельств. Если вы используете Power BI Desktop в режиме интерактивного подключения к табличной модели, но не планируете публикацию на своем сайте Power BI, шлюз не требуется. Если же вы планируете публиковать информацию на своем сайте Power BI, шлюз данных необходим, чтобы гарантировать безопасность связи между службой Power BI и вашим локальным сервером Analysis Services. Перед установкой шлюза поговорите со своим администратором сервера Analysis Services.

В режиме выбора элементов и получения данных вы импортируете данные табличной модели сразу в файл Power BI Desktop, поэтому шлюз не нужен.

**Вопрос.** В чем разница между интерактивным подключением к табличной модели из Power BI и подключением из Power BI Desktop?

**Ответ.** При интерактивном подключении к табличной модели с сайта в службе Power BI к локальной базе данных Analysis Services вашей организации для безопасного обмена информацией требуется локальный шлюз данных. При интерактивном подключении к табличной модели из Power BI Desktop шлюз не требуется, так как и Power BI Desktop, и сервер Analysis Services, к которому выполняется подключение, работают локально в вашей организации. Однако шлюз необходим для публикации файла Power BI Desktop на вашем сайте Power BI.

**Вопрос.** Могу ли я после создания интерактивного подключения подключиться к другому источнику данных в том же файле Power BI Desktop?

**Ответ.** Нет. Вы не можете просматривать данные в режиме интерактивного подключения и подключиться к источнику данных другого типа в рамках одного файла. Если вы уже импортировали данные или подключились к другому источнику данных в файле Power BI Desktop, необходимо создать новый файл для просмотра данных в интерактивном режиме.

**Вопрос.** Могу ли я после создания интерактивного подключения редактировать модель или запрос в Power BI Desktop?

**Ответ.** Вы можете создать меры уровня отчета в Power BI Desktop, но при просмотре активных данных все остальные функции запросов и моделирования будут отключены.

**Вопрос.** Безопасно ли созданное интерактивное подключение?

**Ответ.** Да. Для подключения к серверу Analysis Services используются ваши текущие учетные данные Windows. При работе с данными в режиме интерактивного подключения вы не можете использовать базовые или сохраненные учетные данные ни в службе Power BI, ни в Power BI Desktop.

**Вопрос.** В навигаторе отображаются модель и перспектива. В чем разница?

**Ответ.** Перспектива — это конкретное представление табличной модели. Она может включать только отдельные таблицы, столбцы или меры в зависимости от того, какой именно анализ данных требуется. Табличная модель всегда содержит по меньшей мере одну перспективу, которая может включать все, что есть в модели. Если вы не уверены, какую перспективу следует выбрать, обратитесь к вашему администратору.

**Вопрос.** Могут ли некоторые функции Analysis Services изменять поведение Power BI?

**Ответ.** Да. В зависимости от функций, используемых в табличной модели, интерфейс Power BI Desktop может изменяться. Некоторые примеры:
* Меры в модели могут быть сгруппированы в верхней части области **Поля**, а не в таблицах вместе со столбцами. Вы по-прежнему можете работать с ними обычным способом, однако вам будет проще находить их!

* Если в табличной модели определены группы расчета, вы сможете использовать их только в сочетании с мерами модели, а не с неявно определенными мерами, которые были созданы путем добавления числовых полей в визуальный элемент. Того же результата можно добиться, если вручную установить для модели флаг **DiscourageImplicitMeasures**. Дополнительные сведения см. в разделе [Группы расчета в Analysis Services](/analysis-services/tabular-models/calculation-groups#benefits).

## <a name="to-change-the-server-name-after-initial-connection"></a>Изменение имени сервера после первого подключения
После создания файла Power BI Desktop с параметрами интерактивного подключения для просмотра данных может потребоваться перевести подключение на другой сервер. Например, если вы создали файл Power BI Desktop при подключении к серверу разработки, но перед публикацией в службе Power BI, вам необходимо подключиться к рабочему серверу.

Чтобы изменить имя сервера, выполните следующие действия.

1. Выберите команду **Изменить запросы** на вкладке **Главная**.

2. В окне **База данных SQL Server Analysis Services** введите новое имя **сервера**, а затем выберите **ОК**.

   
## <a name="troubleshooting"></a>Устранение неполадок 
Ниже перечислены все известные проблемы при подключении к службам SQL Server Analysis Services (SSAS) или Azure Analysis Services. 

* **Ошибка Не удалось загрузить схему модели**. Эта ошибка обычно возникает, когда у подключающегося к службам Analysis Services пользователя нет доступа к базе данных или модели.