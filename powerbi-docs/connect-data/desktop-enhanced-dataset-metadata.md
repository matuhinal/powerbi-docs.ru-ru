---
title: Расширенные метаданные набора данных в Power BI Desktop (предварительная версия)
description: В этой статье описывается, как использовать расширенные метаданные набора данных в Power BI.
author: davidiseminger
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 06/11/2020
ms.author: davidi
LocalizationGroup: Connect to data
ms.openlocfilehash: 389de5d34b00afbe70a1489dfc61e760530590a9
ms.sourcegitcommit: 642b0c04d3ff3aa4d5422ca5054a5a158fb01b22
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2020
ms.locfileid: "88512892"
---
# <a name="using-enhanced-dataset-metadata-preview"></a>Использование расширенных метаданных набора данных (предварительная версия)

Когда Power BI Desktop создает отчеты, он также создает метаданные набора данных в соответствующих файлах PBIX и PBIT. Ранее метаданные хранились в формате, характерном для Power BI Desktop. В нем использовались выражения M и источники данных в кодировке Base-64, а также предположения о том, как были сохранены метаданные.

С выпуском функции **расширенных метаданных набора данных** многие из этих ограничений исключаются. При включенной функции **расширенных метаданных набора данных** метаданные, созданные Power BI Desktop, используют формат, аналогичный тому, что используется для табличных моделей Analysis Services, основанных на [табличной модели объектов](/analysis-services/tom/introduction-to-the-tabular-object-model-tom-in-analysis-services-amo).


Функция **расширенных метаданных набора данных** является стратегической и базовой, поскольку в будущем функциональные возможности Power BI будут создаваться на основе метаданных. Некоторые дополнительные возможности, в которых могут использоваться преимущества расширенных метаданных набора данных, включают [чтение и запись XMLA](https://docs.microsoft.com/power-platform-release-plan/2019wave2/business-intelligence/xmla-readwrite) для управления наборами данных Power BI, а также миграцию рабочих нагрузок Analysis Services в Power BI для использования преимуществ функций следующего поколения.



## <a name="enable-enhanced-dataset-metadata"></a>Включение расширенных метаданных набора данных

В настоящее время доступна предварительная версия функции **расширенных метаданных набора данных**. Чтобы включить расширенные метаданные набора данных, в Power BI Desktop выберите **Файл > Параметры и настройки > Параметры > Предварительная версия функций**, а затем установите флажок **Хранить наборы данных с помощью формата расширенных метаданных**, как показано на следующем рисунке. 

![Включение предварительной версии функции](media/desktop-enhanced-dataset-metadata/enhanced-dataset-metadata-01.png)

Будет предложено перезапустить Power BI Desktop.

![Запрос перезапуска](media/desktop-enhanced-dataset-metadata/enhanced-dataset-metadata-02.png)

После включения предварительной версии функции Power BI Desktop попытается обновить файлы PBIX и PBIT, использующие прежний формат метаданных. 

> [!IMPORTANT]
> Включение функции **расширенных метаданных набора данных** приведет к необратимому обновлению отчетов. Отчеты Power BI, загруженные или созданные в Power BI Desktop с включенной функцией **расширенных метаданных набора данных**, необратимо преобразуются в формат расширенных метаданных набора данных.

## <a name="report-backup-files"></a>Файлы резервных копий отчетов

Операция обновления отчета для использования функции **расширенных метаданных набора данных** необратима. Однако для сохранения версии отчета в исходном формате (до обновления) во время обновления создается файл резервной копии отчета. Файл резервной копии удаляется через 30 дней. 

Чтобы выбрать файл резервной копии отчета, выполните следующие действия.

1. Перейдите в следующее расположение: ```C:\Users\<user>\AppData\Local\Microsoft\Power BI Desktop\TempSaves\Backup```. При использовании версии Power BI Desktop из Microsoft Store используйте следующую папку: ```C:\Users\<user>\Microsoft\Power BI Desktop Store App\TempSaves\Backups``` 

2. Найдите копию отчета с именем и меткой времени исходного файла.

3. Скопируйте файл в нужное расположение, чтобы его сохранить.

4. Если вы решите открыть или использовать этот исходный файл в Power BI Desktop убедитесь, что предварительная версия функции **Расширенный формат метаданных** отключена. 

Файл резервной копии создается при обновлении отчета, поэтому он не содержит изменения, внесенные после его выполнения. Для новых отчетов, созданных при включенной функции **Расширенный формат метаданных**, файл резервной копии отсутствует.


## <a name="considerations-and-limitations"></a>Рекомендации и ограничения

В предварительной версии применяются следующие ограничения, если включена предварительная версия функции.

### <a name="unsupported-features-and-connectors"></a>Неподдерживаемые компоненты и соединители

Действительны следующие ограничения.

При открытии существующего файла PBIX или PBIT, который не был обновлен, если набор данных содержит какие-либо из следующих компонентов или соединителей, обновление завершится ошибкой. Такой сбой не должен немедленно сказаться на взаимодействии с пользователем, и Power BI Desktop продолжит использовать прежний формат метаданных.

* Все пользовательские соединители (ограничение выпуска за май 2020 г.)
* Скрипты Python
* Azure DevOps Server
* Соединитель BI
* Denodo
* Dremio
* Exasol
* Indexima
* Ирисы Фишера
* Jethro ODBC
* Kyligence Enterprise
* MarkLogic ODBC
* Qubole Presto
* Team Desk
* Выражения M, содержащие определенные сочетания символов, таких как "\\n" в именах столбцов
* Когда используются наборы данных с включенной функцией **расширенных метаданных набора данных**, в службе Power BI не удастся настроить источники данных единого входа.

Если вы используете выпуск Power BI Desktop за **июнь 2020 г.** (или более позднюю версию), все пользовательские и встроенные соединители *поддерживаются* для Power BI Desktop службы Power BI. Если в процессе публикации при установленном выпуске за июнь 2020 г. (или более поздней версии) на шлюзе возникли ошибки, набор данных будет опубликован, но пользователям потребуется повторно опубликовать отчет для обновления данных. Диалоговое окно **Параметры источника данных** является единственным индикатором того, что в ходе публикации возникли проблемы.

Отчеты, использующие неподдерживаемые соединители или функции, не будут обновлены до нового формата. Отчеты, которые уже были обновлены или созданы после включения этой новой функции, не поддерживают добавление перечисленных неподдерживаемых компонентов или соединителей. 

Запросы с динамическими источниками данных не поддерживаются. Отчеты с динамическими источниками данных не будут обновлены до нового формата, а отчеты, которые уже были обновлены или созданы недавно с уже включенной функцией, не будут поддерживать добавление динамических источников данных. Запрос использует динамический источник данных, если источник изменяется в зависимости от параметра, входных данных функции или непостоянной функции. 

Запросы с ошибками в вышестоящих этапах или ветвях не поддерживаются. 

Кроме того, для файлов PBIX и PBIT, которые уже были успешно обновлены для использования **расширенных метаданных наборов данных**, *не удастся* использовать описанные выше функции (или неподдерживаемые соединители).

### <a name="lineage-view"></a>Представление происхождения
Для наборов данных с новым форматом метаданных в представлении происхождения данных в службе Power BI ссылки на потоки данных в настоящее время не отображаются.

## <a name="next-steps"></a>Дальнейшие действия

Power BI Desktop предоставляет широкие возможности. Дополнительные сведения об этих возможностях см. в следующих ресурсах.

* [Что такое Power BI Desktop?](../fundamentals/desktop-what-is-desktop.md)
* [Новые возможности Power BI Desktop](../fundamentals/desktop-latest-update.md)
* [Об использовании Редактора запросов в Power BI Desktop](../transform-model/desktop-query-overview.md)
* [Типы данных в Power BI Desktop](desktop-data-types.md)
* [Формирование и объединение данных в Power BI Desktop](desktop-shape-and-combine-data.md)
* [Общие задачи с запросами в Power BI Desktop](../transform-model/desktop-common-query-tasks.md)
