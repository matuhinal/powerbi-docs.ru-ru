---
title: Устранение неполадок конвейеров развертывания
description: Устранение неполадок конвейеров развертывания в Power BI
author: KesemSharabi
ms.author: kesharab
ms.topic: troubleshooting
ms.service: powerbi
ms.subservice: powerbi-service
ms.date: 09/15/2020
ms.openlocfilehash: 0a90c03c516b64e5a0a81c6a2bbdf0049d48b76f
ms.sourcegitcommit: be0971576a3f1af7a064371c9cf27dd462dfca82
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2020
ms.locfileid: "92080261"
---
# <a name="deployment-pipelines-troubleshooting"></a>Устранение неполадок конвейеров развертывания

В этой статье приведены сведения об устранении неполадок, связанных с конвейерами развертывания.

## <a name="general"></a>Общие

### <a name="whats-deployment-pipelines-in-power-bi"></a>Сведения о конвейерах развертывания в Power BI

Чтобы понять, что такое конвейеры развертывания в Power BI, ознакомьтесь со статьей [Общие сведения о конвейерах развертывания (предварительная версия)](deployment-pipelines-overview.md).

### <a name="how-do-i-get-started-with-deployment-pipelines"></a>Как начать работу с конвейерами развертывания?

Начало работы с конвейерами развертывания описано в [этой статье](deployment-pipelines-get-started.md).

### <a name="why-cant-i-see-the-deployment-pipelines-button"></a>Почему не отображается кнопка "Конвейеры развертывания"?

Если описанные ниже условия не выполняются, кнопка "Конвейеры развертывания" будет недоступна.

* Вы являетесь пользователем [Power BI Pro](../admin/service-admin-purchasing-power-bi-pro.md).

* Вы принадлежите к организации, использующей емкость Premium.

* Рабочую область можно назначить только одному конвейеру.

* Вы являетесь администратором новой рабочей области.

### <a name="why-cant-i-see-the-pipeline-stage-tag-in-my-workspace"></a>Почему я не могу видеть тег этапа конвейера в своей рабочей области?

Конвейеры развертывания отображают тег этапа конвейера в рабочих областях, назначенных конвейеру. Теги для этапов *Разработка* и *Тестирование* отображаются всегда. Но тег *Рабочая среда* будет отображаться только в том случае, если у вас есть [доступ к конвейеру](deployment-pipelines-process.md#user-with-pipeline-access) или вы имеете права [администратора рабочей области](deployment-pipelines-process.md#workspace-admin).

> [!div class="mx-imgBorder"]
> ![Снимок экрана: тег "Рабочая среда" в рабочей области конвейера рабочей среды.](media/deployment-pipelines-troubleshooting/production-tag.png)

## <a name="licensing"></a>Лицензирование

### <a name="what-licenses-are-needed-to-work-with-deployment-pipelines"></a>Какие лицензии необходимы для работы с конвейерами развертывания?

Чтобы использовать конвейеры развертывания, необходимо быть пользователем [Pro](../admin/service-admin-purchasing-power-bi-pro.md) с емкостью [Premium](../admin/service-premium-what-is.md). Дополнительные сведения см. в разделе [Доступ к конвейерам развертывания](deployment-pipelines-get-started.md#accessing-deployment-pipelines).

### <a name="what-type-of-capacity-can-i-assign-to-a-workspace-in-a-pipeline"></a>Какой тип емкости можно назначить рабочей области в конвейере?

Все рабочие области в конвейере развертывания должны находиться в пределах выделенной емкости для функционирования конвейера. Однако можно использовать разные емкости для разных рабочих областей в конвейере. Кроме того, можно использовать различные типы емкости для разных рабочих областей в одном конвейере.

Для разработки и тестирования можно использовать емкость A или EM в качестве учетной записи Power BI Pro для каждого пользователя.

Для рабочих областей требуется емкость P. Если вы являетесь независимым поставщиком программного обеспечения, распространяющим содержимое через встраиваемые приложения, вы также можете использовать для производства емкости A или EM.

## <a name="technical"></a>Технические вопросы

### <a name="why-cant-i-see-all-my-workspaces-when-i-try-to-assign-a-workspace-to-a-pipeline"></a>Почему я не вижу все рабочие области при попытке назначить рабочую область конвейеру?

Чтобы назначить рабочую область конвейеру, должны выполняться следующие условия:

* Рабочая область — это [новый интерфейс рабочей области](../collaborate-share/service-create-the-new-workspaces.md)

* Вы являетесь администратором рабочей области.

* Рабочая область не назначена ни одному другому конвейеру.

* Рабочая область находится в емкости [Premium](../admin/service-premium-what-is.md).

Рабочие области, которые не соответствуют этим условиям, не отображаются в списке выбора рабочих областей.

### <a name="how-can-i-assign-workspaces-to-all-the-stages-in-a-pipeline"></a>Как назначить рабочие области всем этапам в конвейере?

Для каждого конвейера можно назначить одну рабочую область. После назначения рабочей области конвейеру ее можно развернуть на следующих этапах конвейера. Во время первого развертывания создается новая рабочая область с копиями элементов на исходном этапе. Связи копируемых элементов сохраняются. Дополнительные сведения см. в разделе о [назначении рабочей области конвейера развертывания](deployment-pipelines-get-started.md#step-2---assign-a-workspace-to-a-deployment-pipeline).

### <a name="why-did-my-first-deployment-fail"></a>Почему произошел сбой первого развертывания?

Сбой первого развертывания мог возникнуть по ряду причин. Некоторые из них перечислены в таблице ниже.

|Ошибка  |Действие  |
|---------|---------|
|У вас нет [разрешений емкости Premium](deployment-pipelines-process.md#creating-a-premium-capacity-workspace).     |Чтобы получить разрешения емкости уровня Premium, можно попросить администратора емкости добавить рабочую область в емкость или запросить разрешения на назначение емкости. Поместив рабочую область в емкость, выполните повторное развертывание.        |
|У вас нет разрешений для рабочей области.     |Для развертывания необходимо быть участником рабочей области. Попросите администратора рабочей области предоставить вам соответствующие разрешения.         |
|Администратор Power BI отключил создание рабочих областей.     |Обратитесь к администратору Power BI для получения поддержки.         |
|Рабочая область не является [новым интерфейсом рабочей области](../collaborate-share/service-create-the-new-workspaces.md).     |Создавайте содержимое в новой рабочей области. Если у вас есть содержимое в классической рабочей области, можно выполнить [обновление](../collaborate-share/service-upgrade-workspaces.md) до нового интерфейса рабочей области.         |
|Вы используете [выборочное развертывание](deployment-pipelines-get-started.md#selective-deployment) и не выбирали набор данных содержимого.     |Используйте один из следующих вариантов: </br></br>Отмените выбор содержимого, связанного с набором данных. Невыбранное содержимое (например, отчеты или панели мониторинга) не будут скопированы в следующий этап. </br></br>Выберите набор данных, связанный с выбранным содержимым. Набор данных будет скопирован в следующий этап.         |

### <a name="im-getting-a-warning-that-i-have-unsupported-artifacts-in-my-workspace-when-im-trying-to-deploy-how-can-i-know-which-artifacts-are-not-supported"></a>При попытке развертывания я получаю предупреждение о том, что в моей рабочей области есть неподдерживаемые артефакты. Как узнать, какие артефакты не поддерживаются?

Полный список элементов и артефактов, которые не поддерживаются в конвейерах развертывания, см. в следующих разделах:

* [Неподдерживаемые элементы](deployment-pipelines-process.md#unsupported-items)

* [Свойства элементов, которые не копируются](deployment-pipelines-process.md#item-properties-that-are-not-copied)

### <a name="why-did-my-deployment-fail-due-to-broken-rules"></a>Почему развертывание завершилось сбоем из-за нарушенных правил?

При возникновении проблем с настройкой правил набора данных перейдите в раздел о [правилах набора данных](deployment-pipelines-get-started.md#step-4---create-dataset-rules) и убедитесь, что [ограничения правил набора данных](deployment-pipelines-get-started.md#dataset-rule-limitations) соблюдены.

Если развертывание ранее прошло успешно и внезапно завершается сбоем из-за нарушения правил, это может быть вызвано повторной публикацией набора данных. Описанные ниже изменения в исходном наборе данных приводят к неудачному развертыванию:

**Правила параметров**

* Удален параметр.

* Изменено имя параметра.

**Правила источника данных**

В правилах набора данных отсутствуют значения. Это могло произойти, если ваш набор данных изменился.

![Снимок экрана с ошибкой "Неправильные правила", отображающейся при сбое развертывания из-за неработающих ссылок.](media/deployment-pipelines-troubleshooting/broken-rule.png)

Если ранее успешное развертывание завершилось сбоем из-за неработающих ссылок, отображается предупреждение. Для перехода в область параметров развертывания, в которой отмеченный набор данных помечен как завершившийся сбоем, можно нажать кнопку **Настроить правила** . Если выбрать набор данных, то правила будут отмечены как нарушенные.

Для успешного развертывания исправьте или удалите нарушенные правила и выполните повторное развертывание.

### <a name="how-can-i-change-the-data-source-in-the-pipeline-stages"></a>Как изменить источник данных на этапах конвейера?

Подключение к источнику данных в службе Power BI нельзя изменить.

Если необходимо изменить источник данных на этапах тестирования или производства, можно использовать [правила набора данных](deployment-pipelines-get-started.md#step-4---create-dataset-rules) или [API](/rest/api/power-bi/datasets/updateparametersingroup). Правила набора данных будут применены только после следующего развертывания.

### <a name="i-fixed-a-bug-in-production-but-now-i-cant-select-the-deploy-to-previous-stage-button-why-is-it-greyed-out"></a>Ошибка в рабочей среде исправлена, но теперь я не могу нажать кнопку Deploy to Previous Stage (Развертывание на предыдущем этапе). Почему она неактивна?

Вы можете развернуть пустой этап только в обратном направлении. Если на этапе тестирования имеется содержимое, вы не сможете выполнить развертывание в обратном направлении из рабочей среды.

После создания конвейера используйте этап разработки для разработки содержимого, а также тестовые этапы для проверки и тестирования. Вы можете исправить ошибки на этих этапах, а затем развернуть фиксированную среду на рабочий этап.

>[!NOTE]
>Обратное развертывание поддерживает только [полное развертывание](deployment-pipelines-get-started.md#deploying-all-content). [Выборочное развертывание](deployment-pipelines-get-started.md#selective-deployment) не поддерживается.

### <a name="does-deployment-pipelines-support-multi-geo"></a>Поддерживают ли конвейеры развертывания с несколькими регионами?

Использование нескольких регионов поддерживается. Развертывание содержимого между этапами в разных геообъектах может занять больше времени.

## <a name="permissions"></a>Разрешения

### <a name="what-is-the-deployment-pipelines-permissions-model"></a>Что такое модель разрешений для конвейеров развертывания?

Модель разрешений для конвейеров развертывания описана в разделе [о разрешениях](deployment-pipelines-process.md#permissions).

### <a name="who-can-deploy-content-between-stages"></a>Кто может развертывать содержимое между этапами?

Содержимое можно развернуть на пустом этапе или на этапе, содержащем содержимое. Содержимое должно размещаться в [емкости Premium](../admin/service-premium-what-is.md).

* **Развертывание на пустом этапе** может выполнить любой пользователь [Pro](../admin/service-admin-purchasing-power-bi-pro.md), который является участником или администратором в исходной рабочей области.

* **Развертывание на этап с содержимым** может выполнить любой пользователь [Pro](../admin/service-admin-purchasing-power-bi-pro.md), который является участником обеих рабочих областей на исходном и целевом этапах развертывания.

* **Переопределение набора данных** . Развертывание переопределяет каждый набор данных, включенный в целевой этап, даже если набор данных не был изменен. Пользователь должен быть владельцем всех наборов данных целевого этапа, указанных в развертывании.

### <a name="which-permissions-do-i-need-to-configure-dataset-rules"></a>Какие разрешения требуются для настройки правил набора данных?

Чтобы настроить правила набора данных в конвейерах развертывания, необходимо быть владельцем набора данных.

### <a name="why-cant-i-see-workspaces-in-the-pipeline"></a>Почему в конвейере не отображаются рабочие области?

Разрешения конвейера и рабочей области управляются отдельно. У вас могут быть разрешения конвейера, но отсутствовать разрешения рабочей области. Дополнительные сведения см. в разделе [Разрешения](deployment-pipelines-process.md#permissions).

## <a name="next-steps"></a>Дальнейшие действия

>[!div class="nextstepaction"]
>[Общие сведения о конвейерах развертывания](deployment-pipelines-overview.md)

>[!div class="nextstepaction"]
>[Начало работы с конвейерами развертывания](deployment-pipelines-get-started.md)

>[!div class="nextstepaction"]
>[Общие сведения о процессе конвейеров развертывания](deployment-pipelines-process.md)

>[!div class="nextstepaction"]
>[Советы и рекомендации по конвейерам развертывания](deployment-pipelines-best-practices.md)
