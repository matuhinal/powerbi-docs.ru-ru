---
title: Использование среза или фильтра относительного времени в Power BI
description: Узнайте, как использовать срез или фильтр для ограничения диапазонов относительного времени в Power BI.
author: maggiesMSFT
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: how-to
ms.date: 04/22/2020
ms.author: maggies
LocalizationGroup: Create reports
ms.openlocfilehash: 056d69a866b0b56e83557e77462e03e3e00a2c8d
ms.sourcegitcommit: eef4eee24695570ae3186b4d8d99660df16bf54c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2020
ms.locfileid: "85218546"
---
# <a name="use-a-relative-time-slicer-and-filter-in-power-bi"></a>Использование среза и фильтра относительного времени в Power BI

[!INCLUDE [applies-to](../includes/applies-to.md)] [!INCLUDE [yes-desktop](../includes/yes-desktop.md)] [!INCLUDE [yes-service](../includes/yes-service.md)]

В связи с новыми сценариями быстрого обновления возможность фильтрации по меньшему периоду времени может быть очень полезной. Срез относительного времени или фильтр относительного времени позволяют применять фильтры с учетом времени для любого столбца даты в модели данных. Например, можно использовать срез относительного времени для отображения только представлений видео в течение последней минуты или часа. 

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time.gif" alt-text="Пример относительного времени":::

Использовать эту функцию в сочетании с [функцией автоматического обновления страниц](../create-reports/desktop-automatic-page-refresh.md) не требуется. Однако многие относительные временные сценарии полезно использовать вместе с функцией автоматического обновления страниц.  

> [!NOTE]
> При применении среза или фильтра относительного времени на странице или на уровне отчета все визуальные элементы на этой странице или отчете фильтруются по одному и тому же диапазону времени с использованием общей временной *привязки*. Так как визуальные элементы могут немного отличаться по времени выполнения, эта общая временная привязка обеспечивает синхронизацию визуальных элементов на странице или в отчете. Дополнительные сведения о [временной привязке](#understanding-anchor-time) см. в этой статье.

## <a name="turn-on-relative-time-preview"></a>Включить предварительный просмотр относительного времени

Фильтр относительного времени находится на этапе предварительной версии, поэтому необходимо включить переключатель функции. Последовательно выберите пункты **Файл**  >  **Параметры и настройки**  >  **Параметры**. В разделе **Глобальные параметры** > **Предварительные версии функций** установите флажок **Относительный фильтр времени**.

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-set-preview.png" alt-text="Установка параметра предварительной версии относительного времени":::

## <a name="create-a-relative-time-slicer-or-filter"></a>Создание среза или фильтра относительного времени

После включения функции можно перетащить поле даты или времени в область поля среза или в зону перетаскивания на панели "Фильтры". 

### <a name="create-a-slicer"></a>Создание среза

1. Перетащите поле даты или времени на холст.

2. Выберите тип визуализации **Срез**.

    :::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-create-slicer.png" alt-text="Создайте временной срез":::

### <a name="create-a-filter"></a>Создание фильтра
 
- Перетащите поле даты или времени на панель "Фильтры" для **этого визуального элемента**, **этой страницы** или **всех страниц**.

### <a name="set-relative-time"></a>Задайте относительное время 

Затем измените тип фильтра на **Относительное время**.

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-set.png" alt-text="Изменить на относительное время":::
 
Вот как он выглядит в срезе:

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-slicer.png" alt-text="Срез относительного времени":::

Вот как он выглядит в фильтре: 

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-filter.png" alt-text="Фильтр относительного времени":::
 
С помощью этого нового типа фильтра можно отфильтровать на основе **последнего**, **следующего** или **этого периода времени**. 

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-last-next.png" alt-text="Выберите последний, следующий или этот период времени":::
 
Окно времени указывается с помощью целого числа и единицы измерения времени: **минуты** или **часы**.
 
:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-minutes-hours.png" alt-text="Выберите минуты или часы":::

Если необходимо сэкономить место на холсте, можно также создать относительный фильтр времени в качестве карточки фильтра на панели "Фильтры".

:::image type="content" source="media/slicer-filter-relative-time/power-bi-relative-time-set-filter.png" alt-text="Задайте вместо этого фильтр относительного времени":::
 
## <a name="understanding-anchor-time"></a>Общие сведения о временной привязке

При применении фильтра к странице или к отчету все визуальные элементы на этой странице или в отчете синхронизируются с тем же точным диапазоном времени. Все эти запросы выдаются относительно времени, называемого *временной привязкой*. Временная привязка автоматически обновляется в следующих случаях.

- Начальная загрузка страницы.
- Обновление вручную.
- Автоматическое обновление страницы или обновление при изменении.
- Изменение модели.

### <a name="anchor-time-exceptions"></a>Исключения временной привязки

- Фильтрация относительного времени с визуальным элементом "Вопросы и ответы" не отсчитывается относительно этого времени привязки, пока вы не преобразуете визуальный элемент "Вопросы и ответы" в стандартный визуальный элемент. Однако другие визуальные элементы искусственного интеллекта, такие как ключевые факторы влияния и декомпозиционное дерево, синхронизируются с временем привязки. 
- Кроме того, фильтры или срезы относительных дат не соотносятся с временной привязкой, если только не имеют относительных фильтров времени. Если на одной странице находятся фильтры относительных дат и времени, фильтр относительных дат учитывает время привязки.

## <a name="limitations-and-considerations"></a>Рекомендации и ограничения

В настоящее время к срезу и фильтру относительного времени применяются описанные ниже ограничения и рекомендации.

- **Рекомендации по использованию часовых поясов**. Модели данных в Power BI не включают сведения о часовом поясе. В моделях можно сохранить данные времени, но без определения часового пояса, к которому они принадлежат. Срезы и фильтры всегда основаны на времени в формате UTC. Если задать фильтр в отчете и отправить его коллеге в другом часовом поясе, отобразятся те же данные. Если вы или ваш коллега не находитесь в часовом поясе UTC, вам обоим следует учитывать смещение времени, с которым придется столкнуться. Используйте редактор запросов, чтобы преобразовать данные, зафиксированные в местном часовом поясе, в формат UTC.
- Этот новый тип фильтра поддерживается в Power BI Desktop, службе Power BI, Power BI Embedded и мобильных приложениях Power BI. Однако существует несколько известных ограничений поддержки.

    - Он не поддерживается через Embed API.
    - Он не поддерживается для публикации в Интернете.

- **Кэширование запросов**. Мы используем кэш клиента. Поэтому предположим, что вы указали "последнюю 1 минуту", затем "последние 5 минут", а затем вернулись к "последней 1 минуте". На этом этапе вы увидите те же результаты, что и при первом запуске, если не обновить страницу или страница не будет автоматически обновлена.

## <a name="next-steps"></a>Дальнейшие действия

- [Использование среза и фильтра относительных дат в Power BI](../visuals/desktop-slicer-filter-date-range.md)
- [Срезы в Power BI](../visuals/power-bi-visualization-slicers.md)
