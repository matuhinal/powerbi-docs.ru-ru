---
title: Архитектура решения бизнес-аналитики в центре компетенции
description: Узнайте, что следует учитывать при проектировании и разработке надежной платформы бизнес-аналитики.
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 08/19/2020
ms.author: v-pemyer
ms.openlocfilehash: fe55c789f5af644a802bc5c5f648315744a074be
ms.sourcegitcommit: f73ea4b9116ad186817ec5cc5d5f487d49cc0cb0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "88638693"
---
# <a name="bi-solution-architecture-in-the-center-of-excellence"></a>Архитектура решения бизнес-аналитики в центре компетенции

Эта статья предназначена для ИТ-специалистов и ИТ-руководителей. Вы узнаете об архитектуре решения бизнес-аналитики в центре компетенции и различных связанных технологиях, включая Azure, Power BI и Excel. Вместе их можно использовать для предоставления масштабируемой, управляемой данными облачной платформы бизнес-аналитики.

Проектирование надежной платформы бизнес-аналитики в чем-то напоминает создание моста, который соединяет преобразованные, обогащенные исходные данные с их потребителями. Для проектирования такой сложной структуры требуется инженерный склад ума, и вместе с тем для получения эффективной ИТ-архитектуры необходимо проявить творческий подход. В крупной организации архитектура решения бизнес-аналитики может состоять из следующих элементов:

- Источники данных
- Прием данных
- Большие данные и подготовка данных
- Хранилище данных
- Семантические модели бизнес-аналитики
- Отчеты

:::image type="content" source="media/center-of-excellence-business-intelligence-solution-architecture/azure-business-intelligence-platform.png" alt-text="На диаграмме показана схема архитектуры для платформы бизнес-аналитики, включающая такие компоненты, как источники данных, прием данных, большие данные, хранилища данных, семантическое моделирование бизнес-аналитики, отчеты и машинное обучение.":::

Платформа должна соответствовать определенным требованиям. В частности, уровень ее масштабируемости и производительности должен отвечать ожиданиям бизнес-служб и потребителей данных. В то же время она должна быть защищена на всех уровнях. Кроме того, она должна быть достаточно устойчива для адаптации к изменениям, так как со временем неизбежно появление новых данных и предметных областей.

## <a name="frameworks"></a>Платформы

Корпорация Майкрософт изначально придерживалась системного подхода, инвестировав в разработку платформ. Платформы для поддержки технических и бизнес-процессов расширяют возможности повторного использования структуры и логики и обеспечивают согласованные результаты. Они также позволяют гибко включать в архитектуру различные технологии, упрощая проектирование и сокращая накладные расходы благодаря повторяемым процессам.

На своем опыте мы узнали, что хорошо спроектированные платформы позволяют лучше контролировать происхождение данных, анализ влияния, обслуживание бизнес-логики, управление таксономией и систему управления. Кроме того, ускорилась разработка, а совместная работа крупных рабочих групп стала оперативнее и эффективнее.

В этой статье описываются некоторые из наших платформ.

## <a name="data-models"></a>Модели данных

Модели данных обеспечивают контроль над структурой данных и доступом к ним. Для бизнес-служб и потребителей данных модели данных являются интерфейсом для взаимодействия с платформой бизнес-аналитики.

Платформа бизнес-аналитики может предоставлять модели трех разных типов.

- Корпоративные модели
- Семантические модели бизнес-аналитики
- Модели машинного обучения

### <a name="enterprise-models"></a>Корпоративные модели

**Корпоративные модели** создаются и обслуживаются ИТ-архитекторами. Иногда они называются многомерными моделями или киосками данных. Как правило, данные хранятся в реляционном формате в виде таблиц измерений и фактов. В этих таблицах хранятся очищенные и обогащенные данные, собранные из множества систем. Они представляют собой источник достоверных данных для отчетов и аналитики.

Корпоративные модели обеспечивают единый источник данных для отчетности и бизнес-аналитики. Они создаются один раз и представляют собой корпоративный стандарт. Политики управления обеспечивают безопасность данных благодаря предоставлению доступа к конфиденциальным наборам данных, таким как сведения о клиентах или финансовые данные, только по мере необходимости. Они предполагают использование соглашений об именовании для повышения достоверности и качества данных.

В облачной платформе бизнес-аналитики корпоративные модели могут развертываться в [пуле Synapse SQL в Azure Synapse](/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is#synapse-sql-pool-in-azure-synapse). В результате пул Synapse SQL становится единственным оптимальным и надежным вариантом получения надежных и своевременных аналитических сведений для организации.

### <a name="bi-semantic-models"></a>Семантические модели бизнес-аналитики

**Семантические модели бизнес-аналитики** представляют семантический слой поверх корпоративных моделей. Они создаются и обслуживаются разработчиками бизнес-аналитики и бизнес-пользователями. Разработчики бизнес-аналитики создают базовые семантические модели бизнес-аналитики, получающие данные из корпоративных моделей. Бизнес-пользователи могут создавать независимые модели меньшего масштаба или расширять базовые семантические модели бизнес-аналитики за счет источников на уровне отделов или внешних источников. Семантические модели бизнес-аналитики обычно ограничиваются одной предметной областью и часто используются совместно широким кругом пользователей.

Бизнес-возможности обеспечиваются не только за счет самих данных, но и за счет семантических моделей бизнес-аналитики, которые описывают понятия, отношения, правила и стандарты. Таким образом, они представляют интуитивно понятные структуры, которые определяют связи между данными и инкапсулируют бизнес-правила в виде вычислений. Они также могут применять детализированные разрешения на доступ к данным, благодаря чему доступ к тем или иным данным получают только пользователи, которым он действительно нужен. Что еще более важно, они повышают производительность запросов, чрезвычайно быстро предоставляя интерактивную аналитику даже на основе терабайтов данных. Как и в корпоративных моделях, в семантических моделях бизнес-аналитики для согласованности применяются соглашения об именовании.

На облачной платформе бизнес-аналитики разработчики бизнес-аналитики могут развертывать семантические модели бизнес-аналитики в [Azure Analysis Services](/azure/analysis-services/) или в [емкостях Power BI Premium](../admin/service-premium-what-is.md#dedicated-capacities). Мы рекомендуем производить развертывание в Power BI, если эта служба используется в качестве слоя отчетов и аналитики. Эти продукты поддерживают различные режимы хранения, позволяя кэшировать данные таблиц моделей данных или использовать [DirectQuery](directquery-model-guidance.md), технологию для передачи запросов в базовый источник данных. DirectQuery — идеальный режим хранения, когда таблицы модели представляют большие объемы данных или когда необходимо предоставлять результаты почти в реальном времени. Режимы хранения можно сочетать. [Составные модели](composite-model-guidance.md) предполагают объединение таблиц, использующих разные режимы хранения, в одной модели.

Для часто запрашиваемых моделей можно использовать [Azure Load Balancer](/azure/load-balancer/load-balancer-overview) с целью равномерного распределения нагрузки между репликами модели. Эта служба также позволяет масштабировать приложения и создавать семантические модели бизнес-аналитики с высоким уровнем доступности.

### <a name="machine-learning-models"></a>Модели машинного обучения

[**Модели машинного обучения**](/windows/ai/windows-ml/what-is-a-machine-learning-model) создаются и обслуживаются специалистами по обработке и анализу данных. Как правило, они разрабатываются на основе необработанных источников в озере данных.

Обученные модели машинного обучения позволяют раскрывать закономерности в данных. Зачастую эти закономерности можно использовать для создания прогнозов с целью обогащения данных. Например, исходя из покупательского поведения можно прогнозировать отток клиентов или сегментировать их. Результаты прогнозов можно добавлять в корпоративные модели, чтобы обеспечить анализ по сегментам клиентов.

На облачной платформе бизнес-аналитики можно использовать [Машинное обучение Azure](/azure/machine-learning/overview-what-is-azure-ml) для обучения, развертывания, автоматизации и мониторинга моделей машинного обучения, а также управления ими.

## <a name="data-warehouse"></a>Хранилище данных

В основе платформы бизнес-аналитики лежит хранилище данных, в котором размещаются корпоративные модели. Это источник утвержденных данных, который выступает в роли как системы записи, так и концентратора, предоставляя корпоративные модели для отчетности, бизнес-аналитики и обработки и анализа данных.

Многие бизнес-службы, в том числе бизнес-приложения, могут полагаться на хранилище данных как на заслуживающий доверия контролируемый источник знаний предприятия.

В корпорации Майкрософт хранилище данных размещается в [Azure Data Lake Storage (ADLS) 2-го поколения](/azure/storage/blobs/data-lake-storage-introduction) и Azure Synapse Analytics.

:::image type="content" source="media/center-of-excellence-business-intelligence-solution-architecture/azure-data-warehouse.png" alt-text="Изображение, на котором представлено подключение Azure Synapse Analytics к Azure Data Lake Storage 2-го поколения":::

- **ADLS 2-го поколения** использует службу хранилища Azure в качестве основы для создания корпоративных озер данных в Azure. Хранилище ADLS 2-го поколения разработано с целью обработки петабайтов информации с поддержкой сотен гигабитов пропускной способности. Кроме того, оно обеспечивает недорогие транзакции и емкость хранилища. Оно также поддерживает доступ, совместимый с Hadoop, что позволяет получать доступ к данным и управлять ими так же, как и в распределенной файловой системе Hadoop (HDFS). Доступ к данным, хранящимся в ADLS 2-го поколения, могут получать самые разные службы: [Azure HDInsight](/azure/hdinsight/), [Azure Databricks](/azure/azure-databricks/what-is-azure-databricks), Azure Synapse Analytics. Поэтому на платформе бизнес-аналитики это отличный вариант для хранения необработанных исходных данных, частично обработанных, промежуточных и готовых рабочих данных. Мы используем его для хранения всех наших бизнес-данных.
- **Azure Synapse Analytics** — это служба аналитики, которая объединяет корпоративные хранилища данных и аналитику больших данных. Служба позволяет вам запрашивать данные на своих условиях, используя бессерверные ресурсы по запросу или подготовленные ресурсы в любом масштабе. Synapse SQL, компонент Azure Synapse Analytics, поддерживает все возможности аналитики на основе T-SQL, поэтому это идеальный вариант для размещения корпоративных моделей, состоящих из таблиц измерений и фактов. Таблицы можно эффективно загружать из ADLS 2-го поколения с помощью простых запросов [T-SQL Polybase](/sql/relational-databases/polybase/polybase-guide). После этого вы можете использовать возможности [MPP](/azure/synapse-analytics/sql-data-warehouse/massively-parallel-processing-mpp-architecture#synapse-sql-mpp-architecture-components) для выполнения высокопроизводительной аналитики.

### <a name="business-rules-engine-framework"></a>Подсистема бизнес-правил

Мы разработали платформу **подсистемы бизнес-правил** (BRE) для каталогизации всей бизнес-логики, которую можно реализовать на уровне хранилища данных. Платформа BRE имеет множество назначений, но в контексте хранилища данных она полезна для создания вычисляемых столбцов в реляционных таблицах. Эти вычисляемые столбцы обычно представлены математическими вычислениями или выражениями, в которых используются условные операторы.

Целью является отделение бизнес-логики от основного кода бизнес-аналитики. Обычно бизнес-правила жестко задаются в хранимых процедурах SQL, из-за чего их обслуживание при изменении бизнес-потребностей требует значительных усилий. В BRE бизнес-правила определяются один раз и используются повторно при применении к разным сущностям в хранилище данных. Если необходимо изменить логику вычисления, ее достаточно обновить только в одном месте, а не во множестве хранимых процедур. Есть и дополнительное преимущество: платформа BRE обеспечивает прозрачность и контролируемость реализованной бизнес-логики, которая может предоставляться через набор отчетов, образующих самообновляемую документацию.

## <a name="data-sources"></a>Источники данных

В хранилище данных могут консолидироваться данные практически из любого источника данных. Как правило, оно строится на основе источников бизнес-данных, которые обычно представляют собой реляционные базы данных для хранения данных, связанных с определенной предметной областью, например продажами, маркетингом, финансами и т. д. Базы данных могут размещаться в облаке или локальной среде. Другие источники данных могут быть файловыми, особенно когда речь идет о веб-журналах или данных Интернета вещей, поступающих с устройств. Помимо этого, данные могут поступать от поставщиков программного обеспечения как услуги (SaaS).

В корпорации Майкрософт некоторые из внутренних систем передают операционные данные непосредственно в ADLS 2-го поколения в необработанных файловых форматах. Помимо озера данных, к числу исходных систем относятся реляционные бизнес-приложения, книги Excel, другие файловые источники, а также система управления основными данными (MDM) и пользовательские репозитории данных. Репозитории MDM позволяют нам управлять основными данными, чтобы обеспечивать их достоверные, стандартизированные и проверенные версии.

## <a name="data-ingestion"></a>Прием данных

Согласно потребностям бизнеса данные периодически принимаются из исходных систем и загружаются в хранилище данных. Это может происходить один раз в день или чаще. Прием данных связан с извлечением, преобразованием и загрузкой данных. Возможна и другая последовательность: извлечение, загрузка и преобразование данных. Различие в том, на каком этапе происходит преобразование. Преобразование служит для очистки, обеспечения соответствия, интеграции и стандартизации данных. Дополнительные сведения см. в статье [Извлечение, преобразование и загрузка (ETL)](/azure/architecture/data-guide/relational-data/etl).

Конечная цель — загрузить нужные данные в корпоративную модель как можно быстрее и эффективнее.

В корпорации Майкрософт используется [Фабрика данных Azure](/azure/data-factory/introduction). Эти службы применяются для планирования и координации проверок, преобразований и групповой загрузки данных из внешних исходных систем в наше озеро данных. Они управляются пользовательскими платформами для параллельной обработки данных в нужном масштабе. Кроме того, производится комплексное ведение журналов для поддержки устранения неполадок, мониторинга производительности и активации уведомлений при выполнении определенных условий.

[Azure Databricks](/azure/azure-databricks/what-is-azure-databricks) — платформа аналитики на основе Apache Spark, оптимизированная для платформы облачных служб Azure, выполняющая преобразования для обработки и анализа данных. Она также позволяет создавать и выполнять модели машинного обучения с помощью записных книжек Python. Оценки, полученные от этих моделей машинного обучения, загружаются в хранилище данных для интеграции прогнозов с корпоративными приложениями и отчетами. Так как Azure Databricks обращается к файлам в озере данных напрямую, потребность в копировании или получении данных сводится к минимуму или отсутствует.

:::image type="content" source="media/center-of-excellence-business-intelligence-solution-architecture/azure-data-ingestion.png" alt-text="Изображение, на котором представлены конвейеры получения и оркестрации данных в Фабрике данных Azure через Azure Databricks в Azure Data Lake Storage 2-го поколения":::

### <a name="ingestion-framework"></a>Платформа приема данных

Мы разработали **платформу приема данных**, состоящую из набора таблиц и процедур настройки. Она поддерживает ориентированный на данные подход для получения больших объемов данных с высокой скоростью и минимальным написанием кода. Если коротко, эта платформа упрощает процесс получения данных для загрузки в хранилище данных.

Работа платформы зависит от таблиц конфигурации, в которых хранятся сведения об источниках и местах назначения данных, в том числе о типе источника, сервере, базе данных, схеме и таблице. Такой подход к проектированию означает, что нам не нужно разрабатывать специальные конвейеры Фабрики данных Azure или пакеты [SQL Server Integration Services (SSIS)](/sql/integration-services/sql-server-integration-services). Вместо этого пишутся процедуры на выбранном нами языке для динамического создания и выполнения конвейеров Фабрики данных Azure. Таким образом, получение данных сводится к процессу настройки, которым легко управлять. Ранее для создания жестко заданных пакетов Фабрики данных Azure или служб SSIS требовался значительный объем ресурсов разработки.

Платформа приема данных была разработана также с целью упростить обработку изменений в вышестоящей схеме источника. При обнаружении изменений в схеме, предназначенных для получения новых атрибутов в исходной системе, можно легко обновить данные конфигурации — вручную или автоматически.

### <a name="orchestration-framework"></a>Платформа оркестрации

Мы разработали **платформу оркестрации** для реализации и оркестрации конвейеров данных. Она имеет ориентированную на данные структуру, которая зависит от набора таблиц конфигурации. В этих таблицах хранятся метаданные, описывающие зависимости конвейера и сопоставление исходных данных с целевыми структурами данных. Инвестиции в разработку этой адаптивной платформы полностью окупились. Теперь больше не требуется жестко задавать каждое перемещение данных.

## <a name="data-storage"></a>Хранилище данных

В озере данных могут храниться большие объемы необработанных данных для последующего использования, а также преобразования промежуточных данных.

В корпорации Майкрософт в качестве единого источника достоверных данных используется хранилище ADLS 2-го поколения. В нем хранятся как необработанные данные, так и промежуточные и готовые рабочие данные. Оно обеспечивает очень экономичное решение озера данных с высоким уровнем масштабируемости для анализа больших данных. Сочетая в себе возможности высокопроизводительной файловой системы и высокую масштабируемость, оно оптимизировано для рабочих нагрузок аналитики данных и ускоряет получение ценных сведений.

ADLS 2-го поколения — это одновременно и хранилище BLOB-объектов, и пространство имен высокопроизводительной файловой системы, для которого настраиваются детализированные разрешения на доступ.

Затем уточненные данные сохраняются в реляционной базе данных, которая обеспечивает высокопроизводительное и масштабируемое хранилище данных для корпоративных моделей с высоким уровнем безопасности и управляемости. Киоски данных по конкретным предметным областям хранятся в Azure Synapse Analytics и загружаются посредством Azure Databricks или запросов T-SQL Polybase.

## <a name="data-consumption"></a>Использование данных

На уровне отчетности бизнес-службы используют корпоративные данные, источником которых является хранилище данных. Они также напрямую обращаются к данным в озере данных для нерегламентированного анализа или задач обработки и анализа данных.

Детализированные разрешения применяются на всех уровнях: озера данных, корпоративных моделей и семантических моделей бизнес-аналитики. Благодаря разрешениям потребители данных могут видеть только те данные, к которым у них есть права доступа.

В корпорации Майкрософт используются отчеты и панели мониторинга Power BI, а также [отчеты Power BI с разбивкой на страницы](../paginated-reports/paginated-reports-report-builder-power-bi.md). Создание некоторых отчетов, особенно финансовых, и некоторые произвольные аналитические действия производятся в Excel.

Мы публикуем словари данных со справочными сведениями о наших моделях данных. Пользователи могут получать из них сведения о нашей платформе бизнес-аналитики. В словарях документируется структура моделей в виде описаний сущностей, форматов, структуры, происхождения данных, связей и вычислений. Благодаря [Каталогу данных Azure](/azure/data-catalog/overview) источники данных легко обнаруживаются и являются понятными для пользователей.

Как правило, шаблоны потребления данных зависят от роли.

- **Аналитики данных** напрямую подключаются к базовым семантическим моделям бизнес-аналитики. Когда в базовых семантических моделях бизнес-аналитики содержатся все необходимые данные и логика, они используют динамические подключения для создания отчетов и панелей мониторинга Power BI. Когда им необходимо расширить модели данными конкретных отделов, они создают [составные модели](composite-model-guidance.md) Power BI. Если возникает потребность в отчетах в стиле электронной таблицы, они используют Excel для создания отчетов на основе базовых семантических моделей бизнес-аналитики или семантических моделей бизнес-аналитики на уровне отделов.
- **Разработчики бизнес-аналитики** и создатели операционных отчетов подключаются непосредственно к корпоративным моделям. Они используют Power BI Desktop для создания аналитических отчетов с динамическим подключением. Они также могут разрабатывать операционные отчеты бизнес-аналитики в виде отчетов Power BI с разбивкой на страницы, создавая собственные SQL-запросы для доступа к данным из корпоративных моделей Azure Synapse Analytics с помощью T-SQL или из семантических моделей Power BI с помощью DAX или MDX.
- **Специалисты по обработке и анализу данных** напрямую подключаются к данным в озере данных. Они используют Azure Databricks и записные книжки Python для разработки моделей машинного обучения, которые часто являются экспериментальными и требуют специальных навыков для использования в рабочей среде.

:::image type="content" source="media/center-of-excellence-business-intelligence-solution-architecture/azure-data-warehouse-consumption.png" alt-text="Изображение, на котором показано использование Azure Synapse Analytics с Power BI, Excel и Машинным обучением Azure.":::

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по этим вопросам см. в следующих ресурсах.

- [Корпоративная бизнес-аналитика в Azure с помощью Azure Synapse Analytics](/azure/architecture/reference-architectures/data/enterprise-bi-synapse)
- У вас появились вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)
- У вас есть предложения? [Идеи по улучшению Power BI](https://ideas.powerbi.com/)

### <a name="professional-services"></a>Профессиональные услуги

Также можно обратиться за помощью к сертифицированным партнерам по Power BI, которые помогут вашей организации в настройке центра компетенции. Они могут предоставить вам обучение или аудит данных по разумной цене. Чтобы обратиться к партнеру по Power BI, посетите [портал партнеров Power BI](https://powerbi.microsoft.com/partners/).

Вы также можете привлекать опытных партнеров-консультантов. Они помогут вам [оценить](https://appsource.microsoft.com/marketplace/consulting-services?product=power-bi&serviceType=assessment&country=ALL&region=ALL), [рассчитать](https://appsource.microsoft.com/marketplace/consulting-services?product=power-bi&serviceType=proof-of-concept&country=ALL&region=ALL) или [реализовать](https://appsource.microsoft.com/marketplace/consulting-services?product=power-bi&serviceType=implementation&country=ALL&region=ALL&page=1) Power BI.
