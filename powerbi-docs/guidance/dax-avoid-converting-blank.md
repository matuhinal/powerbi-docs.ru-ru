---
title: 'DAX: Не рекомендуется: преобразование BLANK в значения'
description: Руководство по преобразованию пустых значений.
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 11/24/2019
ms.author: v-pemyer
ms.openlocfilehash: 0717ad71d3065043a3bff8305c051cdce40e7329
ms.sourcegitcommit: cff93e604e2c5f24e0f03d6dbdcd10c2332aa487
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90965080"
---
# <a name="dax-avoid-converting-blanks-to-values"></a>DAX: Не рекомендуется: преобразование BLANK в значения

При написании выражений мер специалист по моделированию данных может столкнуться с ситуацией, когда получить осмысленное значение невозможно. В таких случаях может возникнуть соблазн вернуть вместо этого такое значение, как нуль. Мы рекомендуем тщательно подумать, является ли такое решение целесообразным.

Рассмотрим приведенное ниже определение меры, которое явным образом преобразует пустые результаты в ноль.

```dax
Sales (No Blank) =
IF(
    ISBLANK([Sales]),
    0,
    [Sales]
)
```

А теперь рассмотрим еще одно определение меры, которое также преобразует пустые результаты в ноль.

```dax
Profit Margin =
DIVIDE([Profit], [Sales], 0)
```

Функция [DIVIDE](/dax/divide-function-dax) делит меру **Profit** (Прибыль) на меру **Sales** (Продажи). Если результат равен нулю или пуст, то возвращается третий аргумент — альтернативный результат (необязательный). Благодаря тому, что в этом примере в качестве альтернативного результата передается ноль, мера гарантированно возвращает значение.

Построенные таким образом меры неэффективны и ухудшают качество отчетов.

Когда они добавляются в визуальный элемент отчета, Power BI пытается получить все группирования в контексте фильтра. Вычисление больших объемов данных и получение результатов таких запросов часто приводит к замедлению отрисовки отчета. Каждая мера из примера фактически превращает разреженное вычисление в плотное, из-за чего Power BI использует больше памяти, чем необходимо.

Кроме того, переизбыток группирований часто приводит пользователей отчета в замешательство.

Давайте посмотрим, что происходит при добавлении меры **Profit Margin** (Удельная прибыль) в визуальный элемент "Таблица" с группированием по клиентам.

![Снимок экрана: Power BI Desktop с визуальным элементом "Таблица", где данные представлены на одной строке для каждого клиента Значения продаж ПУСТЫ, а значения удельной прибыли равны нулю процентов. ](media/dax-avoid-converting-blank/table-visual-poor.png)

В визуальном элементе "Таблица" отображается чрезмерно много строк. (В модели в действительности 18 484 клиентов, и таблица пытается отобразить их все.) Обратите внимание, что клиенты, которых видно, еще не имеют ни одной продажи. Однако, так как мера **Profit Margin** всегда возвращает значение, они отображаются.

> [!NOTE]
> Если точек данных, которые должны отображаться в визуальном элементе, слишком много, в Power BI могут применяться стратегии уменьшения объема данных, сокращающие или суммирующие результаты запросов. Дополнительные сведения см. в статье [Ограничения точек данных и стратегии по шаблону визуализации](../visuals/power-bi-data-points.md).

Давайте посмотрим, что произойдет, если улучшить определение меры **Profit Margin**. Теперь она возвращает значение, только когда мера **Sales** не пуста (или не равна нулю).

```dax
Profit Margin =
DIVIDE([Profit], [Sales])
```

В визуальном элементе "Таблица" теперь отображаются только те клиенты, которые имеют продажи в текущем контексте фильтра. Улучшение меры повысило эффективность и практичность отчета.

![Снимок экрана: Power BI Desktop с визуальным элементом "Таблица", где данные представлены как отфильтрованное содержимое](media/dax-avoid-converting-blank/table-visual-good.png)

> [!TIP]
> При необходимости можно настроить визуальный элемент для отображения всех группирований (возвращающих значения или пустые результаты) в контексте фильтра, включив параметр [Показать элементы без данных](../create-reports/desktop-show-items-no-data.md).

## <a name="recommendation"></a>Рекомендация

Рекомендуется, чтобы меры возвращали пустые значения, если получить осмысленное значение невозможно.

Это эффективный подход к проектированию, позволяющий Power BI быстрее отрисовывать отчеты. Кроме того, возвращение пустого значения обусловлено тем, что визуальные элементы отчета по умолчанию удаляют группирования, если сводные данные пусты.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по этим вопросам см. в следующих ресурсах.

- [Руководство по выражениям анализа данных (DAX)](/dax/)
- Схема обучения: [Использование DAX в Power BI Desktop](/learn/paths/dax-power-bi/)
- У вас появились вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)
- У вас есть предложения? [Идеи по улучшению Power BI](https://ideas.powerbi.com)