---
title: 'DAX: Правильное использование функций ошибок'
description: Рекомендации по использованию функций ошибок DAX.
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 09/26/2019
ms.author: v-pemyer
ms.openlocfilehash: 4730e835c511153232f79c193de5bbd56d63b963
ms.sourcegitcommit: f1f57c5bc6ea3057007ed8636ede50188ed90ce1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "74410901"
---
# <a name="dax-appropriate-use-of-error-functions"></a>DAX: Правильное использование функций ошибок

Как разработчик моделей данных, при написании выражения DAX, которое может вызвать ошибку времени вычисления, вы можете использовать две полезные функции DAX.

- Функция [ISERROR](/dax/iserror-function-dax) принимает отдельное выражение и возвращает значение TRUE, если это выражение приводит к ошибке.
- Функция [IFERROR](/dax/iferror-function-dax) принимает два выражения. Если первое выражение приводит к ошибке, возвращается значение второго выражения. На самом деле это оптимизированная реализация вложения функции ISERROR в функцию [IF](/dax/if-function-dax).

Хотя эти функции могут быть полезными и помогают создавать простые для понимания выражения, они также могут значительно снизить производительность вычислений. Причина в том, что эти функции увеличивают число необходимых проверок подсистемы хранилища.

Большинство ошибок времени оценки возникают из-за непредвиденных пустых (BLANK), нулевых значений или неверного преобразования типов данных.

## <a name="recommendations"></a>Рекомендации

Лучше избегать использования функций IFERROR и ISERROR. Вместо этого следует применять защитные стратегии при разработке модели и написании выражений. В число таких стратегий могут входить следующие.

- **Обеспечение загрузки качественных данных в модель.** Используйте преобразования Power Query для удаления или замены недопустимых или отсутствующих значений, а также для установки правильных типов данных. Преобразование Power Query можно также использовать для фильтрации строк при возникновении ошибок, например при преобразовании недопустимых данных.

    Качество данных можно также контролировать, установив для столбца модели **Is Nullable** значение OFF, что приведет к сбою обновления данных при появлении BLANK. При возникновении этой ошибки данные, загруженные в результате успешного обновления, останутся в таблицах.
- **Использование функции IF.** Выражение логической проверки с функцией IF позволяет определить, будет ли возникать ошибка в результате. Обратите внимание, что, подобно функциям IFERROR и ISERROR, эта функция может вызвать дополнительную проверку подсистемы хранилища, но, скорее всего, будет работать лучше, чем при возникновении ошибки.
- **Использование функций, нечувствительных к ошибкам.** Некоторые функции DAX проверяют и компенсируют ошибки. Такие функции позволяют ввести альтернативный результат, который будет возвращен в случае ошибки. Функция [DIVIDE](/dax/divide-function-dax) — это один из таких примеров. Дополнительные сведения об этой функции см. в статье [DAX: функция DIVIDE и оператор деления (/)](dax-divide-function-operator.md).

## <a name="example"></a>Пример

Следующее выражение меры проверяет, возникает ли ошибка. Если это так, выражение возвращает значение BLANK (так происходит, если не указать функцию IF с выражением value-if-false).

```dax
Profit Margin
= IF(ISERROR([Profit] / [Sales]))
```

Следующая версия выражения меры была улучшена с помощью функции IFERROR вместо функций IF и ISERROR.

```dax
Profit Margin
= IFERROR([Profit] / [Sales], BLANK())
```

Хотя это выражение меры достигает того же результата, оно более эффективно и элегантно.

```dax
Profit Margin
= DIVIDE([Profit], [Sales])
```

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по этим вопросам см. в следующих ресурсах.

- [Руководство по выражениям анализа данных (DAX)](/dax/)
- У вас появились вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)
