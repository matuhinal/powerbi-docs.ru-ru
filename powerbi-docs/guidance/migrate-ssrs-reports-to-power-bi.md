---
title: Перенос отчетов SQL Server Reporting Services в Power BI
description: Рекомендации по переносу отчетов SQL Server Reporting Services (SSRS) в Power BI.
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 01/03/2020
ms.author: v-pemyer
ms.openlocfilehash: cf11b98d7eacd7b1e245fb0aed62d0f14e7f4c4c
ms.sourcegitcommit: 87b7cb4a2e626711b98387edaa5ff72dc26262bb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2020
ms.locfileid: "79041334"
---
# <a name="migrate-sql-server-reporting-services-reports-to-power-bi"></a>Перенос отчетов SQL Server Reporting Services в Power BI

Эта статья предназначена для тех, кто создает отчеты SQL Server Reporting Services (SSRS), и администраторов Power BI. В ней представлены рекомендации по переносу [отчетов, созданных на языке определения отчетов (RDL)](/sql/reporting-services/reports/report-definition-language-ssrs), в Power BI.

> [!NOTE]
> Можно перенести только RDL-отчеты. В Power BI отчеты RDL называются _отчетами с разбивкой на страницы_.

Сведения в этой статье разделены на четыре раздела. Перед переносом отчетов рекомендуется сначала прочитать статью целиком.

1. [Перед началом](#before-you-start)
1. [Подготовка к переносу](#pre-migration-stage)
1. [Перенос](#migration-stage)
1. [После переноса](#post-migration-stage)

Перенос можно выполнить без простоев серверов SSRS и без нарушения работы пользователей, взаимодействующих с отчетами. Важно понимать, что удаление данных или отчетов не требуется. Это означает, что текущую среду можно по-прежнему использовать до тех пор, пока не будут выполнены все действия по выводу ее из строя.

## <a name="before-you-start"></a>Перед началом работы

Перед началом переноса необходимо убедиться, что среда соответствует определенным требованиям. Мы рассмотрим необходимые условия, а также расскажем вам о полезном средстве переноса.

### <a name="preparing-for-migration"></a>Подготовка к переносу

При подготовке к переносу отчетов в Power BI сначала убедитесь, что у организации имеется подписка [Power BI Premium](../service-premium-what-is.md). Эта подписка необходима для размещения и запуска отчетов с разбивкой на страницы Power BI.

### <a name="supported-versions"></a>Поддерживаемые версии

Можно перенести экземпляры служб SSRS, работающих в локальной среде или на виртуальных машинах, размещенных у поставщиков облачных служб, таких как Azure.

Ниже указаны версии SQL Server, поддерживаемые для переноса в Power BI.

> [!div class="checklist"]
> - SQL Server 2012
> - SQL Server 2014;
> - SQL Server 2016;
> - SQL Server 2017;
> - SQL Server 2019

Также возможен перенос с сервера отчетов Power BI.

### <a name="migration-tool"></a>Средство миграции

Для подготовки и переноса отчетов рекомендуется использовать [средство переноса RDL](https://github.com/microsoft/RdlMigration). Это средство было разработано корпорацией Майкрософт, чтобы помочь клиентам перенести RDL-отчеты с серверов SSRS на платформу Power BI. Оно доступно на сайте GitHub, и в нем представлено полное пошаговое руководство по сценарию переноса.

Данное средство позволяет автоматизировать следующие задачи.

* Проверка на наличие [неподдерживаемых источников данных](../paginated-reports/paginated-reports-data-sources.md) и [неподдерживаемых функций отчетов](../paginated-reports/paginated-reports-faq.md#what-paginated-report-features-in-ssrs-arent-yet-supported-in-power-bi).
* Преобразование любых _общих_ ресурсов во _внедренные_ ресурсы.
  * Общие **источники данных** становятся внедренными источниками данных.
  * Общие **наборы данных** становятся внедренными наборами данных.
* Публикация отчетов (прошедших проверку) в виде отчетов с разбивкой на страницы в указанной рабочей области Power BI (в емкости Premium).

Оно не изменяет и не удаляет существующие отчеты. По завершении средство предоставляет сводку по всем выполненным действиям — успешным или неудачным.

Со временем корпорация Майкрософт может вносить улучшения в это средство. Участникам сообщества рекомендуется принять активное участие в его улучшении.

## <a name="pre-migration-stage"></a>Подготовка к переносу

Убедившись, что ваша организация соответствует предварительным требованиям, можно приступить к _подготовке к переносу_. Это включает три этапа.

1. Обнаружение
1. Оценка
1. Подготовка.

### <a name="discover"></a>Обнаружение

Целью этапа _Обнаружение_ является определение существующих экземпляров служб SSRS. Этот процесс включает проверку сети для обнаружения всех экземпляров SQL Server в организации.

Можно использовать [Набор средств оценки и планирования Майкрософт](https://www.microsoft.com/download/details.aspx?id=7826). Он также известен как "набор средств MAP"; он служит для обнаружения экземпляров, версий и установленных компонентов SQL Server и создания соответствующего отчета. Это эффективное средство для инвентаризации, оценки и создания отчетов, которое может упростить процесс планирования переноса.

### <a name="assess"></a>Оценка

После обнаружения экземпляров служб SSRS наступает этап _Оценка_, цель которого определить, какие отчеты SSRS (или элементы сервера) подлежат переносу.

С серверов SSRS в Power BI можно перенести только RDL-отчеты. Каждый перенесенный RDL-отчет станет отчетом с разбивкой на страницы Power BI.

Однако следующие типы элементов SSRS не удастся перенести в Power BI.

- Общие источники данных <sup>1</sup>
- Общие наборы данных <sup>1</sup>
- Ресурсы, такие как файлы изображений
- Ключевые показатели эффективности (SSRS 2016 или более поздней версии — только в выпуске Enterprise Edition)
- Мобильные отчеты (SSRS 2016 или более поздней версии — только в выпуске Enterprise Edition)
- Модели отчетов (устарели)
- Элементы отчетов (устарели)

<sup>1</sup> [Средство переноса RDL](https://github.com/microsoft/RdlMigration) автоматически преобразует общие источники данных и общие наборы данных (при условии что они используют поддерживаемые источники данных).

Если в RDL-отчетах используются функции, которые [пока еще не поддерживаются в отчетах с разбивкой на страницы Power BI](../paginated-reports/paginated-reports-faq.md#what-paginated-report-features-in-ssrs-arent-yet-supported-in-power-bi), можно запланировать их преобразование в [отчеты Power BI](../consumer/end-user-reports.md). Даже если RDL-отчеты можно перенести, рекомендуется модернизировать их до отчетов Power BI, когда это имеет смысл.

RDL-отчеты не могут использовать единый вход (SSO), если им необходимо получать данные из _локальных источников данных_. В настоящее время все данные, полученные из этих источников, будут выполняться с помощью контекста безопасности _учетной записи пользователя источника данных шлюза_. Службы SQL Server Analysis Services (SSAS) не могут обеспечить безопасность для каждого пользователя на уровне строк (RLS).

Как правило, отчеты с разбивкой на страницы Power BI оптимизированы для **печати** и **создания PDF-файлов**. Отчеты Power BI оптимизированы для **исследования данных и интерактивных возможностей**. Дополнительные сведения см. в разделе [В каких случаях использовать отчеты с разбивкой на страницы в Power BI](report-paginated-or-power-bi.md).

### <a name="prepare"></a>Подготовка.

Целью этапа _Подготовка_ является подготовка всех компонентов. Он подразумевает настройку среды Power BI, планирование защиты и публикации отчетов, а также идеи по повторной разработке элементов SSRS, которые не переносятся.

1. Убедитесь, что для емкости Power BI Premium включена [рабочая нагрузка отчетов с разбивкой на страницы](../service-admin-premium-workloads.md#paginated-reports), а также что она имеет достаточный объем памяти.
1. Проверьте поддержку [источников данных](../paginated-reports/paginated-reports-data-sources.md) отчета и настройте [Power BI Gateway](../service-gateway-onprem.md), чтобы разрешить подключение к любым локальным источникам данных.
1. Ознакомьтесь с требованиям к обеспечению безопасности Power BI и спланируйте [способ воспроизведения папок и разрешений SSRS](/sql/reporting-services/security/secure-folders) с помощью [рабочих областей Power BI и ролей рабочих областей](../service-new-workspaces.md).
1. Ознакомьтесь с обеспечением общего доступа в Power BI и спланируйте способ распространения содержимого путем публикации [приложений Power BI](../service-create-distribute-apps.md).
1. Рассмотрите возможность использования [общих наборов данных Power BI](../service-datasets-build-permissions.md) вместо общих источников данных SSRS.
1. Используйте [Power BI Desktop](../desktop-what-is-desktop.md) для создания отчетов, оптимизированных для мобильных устройств, возможно, с использованием [настраиваемых визуальных элементов Power KPI](https://appsource.microsoft.com/product/power-bi-visuals/WA104381083?tab=Overview) вместо мобильных отчетов и ключевых показателей эффективности SSRS.
1. Повторно оцените использование встроенного поля **UserID** в отчетах. Если для защиты данных отчета вы полагаетесь на **UserID**, то следует понимать, что для отчетов с разбиением на страницы (при размещении в службе Power BI) он возвращает Имя участника-пользователя (UPN). Таким образом, вместо возвращения имени учетной записи NT, например, _AW\mblythe_, встроенное поле возвращает нечто вроде _m.blythe&commat;adventureworks.com_. Необходимо пересмотреть определения набора данных и, возможно, исходные данные. Рекомендуется тщательно протестировать отчеты после их пересмотра и публикации, чтобы убедиться, что разрешения данных работают должным образом.
1. Повторно оцените использование встроенного поля **ExecutionTime** в отчетах. Встроенное поле возвращает дату/время для разбитых на страницы отчетов (при размещении в службе Power BI) в формате _времени UTC_. Это может повлиять на значения параметров отчета по умолчанию и метки времени выполнения отчета (обычно добавляемые в нижние колонтитулы отчета).
1. Если источником данных является сервер SQL Server (локальный), в отчетах не должны использоваться визуализации карт. Визуализация карты использует пространственные типы данных SQL Server, которые не поддерживаются шлюзом. Дополнительные сведения см. в разделе [Сложные типы данных SQL Server](report-paginated-data-retrieval.md#sql-server-complex-data-types) руководства по получению данных для отчетов с разбивкой на страницы.
1. Убедитесь, что авторы отчетов установили [Power BI Report Builder](../paginated-reports/report-builder-power-bi.md) и что в рамках организации можно с легкостью распространять более поздние выпуски.

## <a name="migration-stage"></a>Перенос

После подготовки среды и отчетов Power BI можно приступать к этапу _Перенос_.

Существует два варианта переноса: _вручную_ и _автоматически_. Перенос вручную подходит для небольшого количества отчетов или отчетов, которые требуют внесения изменений перед переносом. Автоматический перенос подходит для переноса большого количества отчетов.

### <a name="manual-migration"></a>Перенос вручную

Любой пользователь с разрешением на доступ к экземпляру SSRS и рабочей области Power BI может вручную перенести отчеты в Power BI. Ниже приведены инструкции, которые нужно выполнить.

1. Откройте портал SSRS, содержащий отчеты, которые требуется перенести.
1. Загрузите каждое определение отчета, сохранив RDL-файлы локально.
1. Откройте _последнюю версию_ Power BI Report Builder и подключитесь к службе Power BI с помощью учетных данных Azure AD.
1. Откройте каждый отчет в Power BI Report Builder, а затем выполните следующее.
   1. Убедитесь, что все источники и наборы данных внедрены в определение отчета, а также что они являются [поддерживаемыми источниками данных](../paginated-reports/paginated-reports-data-sources.md).
   1. Просмотрите отчет, чтобы убедиться, что он отображается правильно.
   1. Выберите параметр _Сохранить как_, а затем выберите _Служба Power BI_.
   1. Выберите рабочую область, в которой будет содержаться отчет.
   1. Убедитесь, что отчет сохранен. Если некоторые функции в структуре отчета пока не поддерживаются, действие сохранения завершится ошибкой. Отобразится сообщение с причинами возникновения ошибки. Затем необходимо будет изменить структуру отчета и сохранить отчет снова.

### <a name="automated-migration"></a>Автоматический перенос

Существует два варианта автоматического переноса. Вы можете использовать:

- Средство переноса RDL
- Общедоступные API для SSRS и Power BI

Вариант с использованием [средства переноса RDL](#migration-tool) уже описан в этой статье.

Для автоматизации переноса содержимого также можно использовать общедоступные API SSRS и Power BI. Поскольку средство переноса RDL поддерживает все эти API, можно разработать собственное настраиваемое средство в соответствии со своими потребностями.

Дополнительные сведения об API см. в следующих разделах.

- [Справочник по REST API Power BI](../developer/automation/rest-api-reference.md)
- [API REST SQL Server Reporting Services](/sql/reporting-services/developer/rest-api)

## <a name="post-migration-stage"></a>После переноса

После успешного завершения переноса все готово к выполнению этапа _После переноса_. Данный этап включает задачи, выполняемые после переноса, чтобы обеспечить правильную и эффективную работу всех компонентов.

### <a name="configure-data-sources"></a>Настройка источников данных

После переноса отчетов в Power BI необходимо убедиться, что их источники данных настроены правильно. Это может включать назначение источников данных шлюза и [безопасное хранение учетных данных источника данных](../paginated-reports/paginated-reports-data-sources.md#azure-sql-database-authentication). Эти действия не выполняются средством переноса RDL.

### <a name="review-report-performance"></a>Просмотр отчета о производительности

Настоятельно рекомендуется выполнить следующие действия, чтобы обеспечить оптимальную работу пользователя с отчетами.

1. Протестируйте отчеты в каждом [браузере, поддерживаемом Power BI](../power-bi-browsers.md), чтобы убедиться, что отчет отображается правильно.
1. Выполните тестирование для сравнения времени отображения отчетов в службах SSRS и Power BI. Убедитесь, что отчеты Power BI отображаются в пределах допустимого времени.
1. Если не удается отобразить отчеты Power BI из-за нехватки памяти, выделите [дополнительные ресурсы для емкости Power BI Premium](../service-admin-premium-workloads.md#paginated-reports).
1. Для отчетов, для отображения которых требуется много времени, рассмотрите возможность предоставления их пользователям в виде [подписок электронной почты с вложениями отчетов](../consumer/paginated-reports-subscriptions.md).
1. Для отчетов Power BI, основанных на наборах данных Power BI, пересмотрите дизайн модели, чтобы убедиться, что они полностью оптимизированы.

### <a name="reconcile-issues"></a>Выявление проблем

Этап "После переноса" является критически важным для выявления любых проблем, а также для решения проблем с производительностью. Добавление рабочей нагрузки отчетов с разбивкой на страницы в емкость может привести к снижению производительности — отчеты с разбивкой на страницы _и другое содержимое_ хранится в емкости.

Дополнительные сведения об этих проблемах, включая конкретные шаги для их понимания и устранения, см. в следующих статьях.

- [Оптимизация емкостей Premium](../service-premium-capacity-optimize.md)
- [Мониторинг емкостей Premium в приложении](../service-admin-premium-monitor-capacity.md)

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по этим вопросам см. в следующих ресурсах.

- [Сведения об отчетах с разбивкой на страницы в Power BI Premium](../paginated-reports/paginated-reports-report-builder-power-bi.md)
- [Руководство по получению данных для отчетов с разбивкой на страницы](report-paginated-data-retrieval.md)
- [В каких случаях использовать отчеты с разбивкой на страницы в Power BI](report-paginated-or-power-bi.md)
- [Отчеты с разбивкой на страницы в Power BI: Вопросы и ответы](../paginated-reports/paginated-reports-faq.md)
- [Вопросы и ответы по Power BI Premium](../service-premium-faq.md)
- [Средство переноса RDL](https://github.com/microsoft/RdlMigration)
- У вас появились вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)
- У вас есть предложения? [Идеи по улучшению Power BI](https://ideas.powerbi.com)

Также можно обратиться за помощью к партнерам по Power BI, которые помогут вашей организации выполнить процесс переноса. Чтобы обратиться к партнеру по Power BI, посетите [портал партнеров Power BI](https://powerbi.microsoft.com/partners/).
