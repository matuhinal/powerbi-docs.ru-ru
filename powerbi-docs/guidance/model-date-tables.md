---
title: Создание таблиц дат в Power BI Desktop
description: Методы создания таблиц дат в Power BI Desktop, а также рекомендации.
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 06/24/2020
ms.author: v-pemyer
ms.openlocfilehash: ad85ad56db907ca19af7dc14681eb34f8c2b9abc
ms.sourcegitcommit: 46a340937d9f01c6daba86a4ab178743858722ec
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "85398345"
---
# <a name="create-date-tables-in-power-bi-desktop"></a>Создание таблиц дат в Power BI Desktop

В этой статье описаны средства моделирования данных, работающие с Power BI Desktop. В ней описываются оптимальные методики разработки для создания таблиц дат в моделях данных.

Для работы с [функциями логики операций со временем](/dax/time-intelligence-functions-dax) выражений анализа данных (DAX) необходимо соблюдать предварительное требование к модели: в модели должна иметься хотя бы одна _таблица дат_. Таблица дат — это таблица, которая соответствует следующим требованиям:

> [!div class="checklist"]
> - Она должна иметь столбец типа данных **дата** (или **дата и время**), называемый _столбцом даты_.
> - Столбец даты должен содержать уникальные значения.
> - Столбец даты не должен содержать ПУСТЫЕ ЗНАЧЕНИЯ.
> - В столбце даты не должно быть отсутствующих дат.
> - Столбец даты должен охватывать полные годы. Год не обязательно должен быть календарным (январь–декабрь).
> - Таблица дат должна быть [помечена как таблица дат](../transform-model/desktop-date-tables.md#setting-your-own-date-table).

Для добавления таблицы дат в модель можно использовать любую из нескольких возможностей:

- параметр "Автоматические дата и время";
- Power Query для подключения к таблице измерения даты;
- Power Query для создания таблицы дат;
- DAX для создания таблицы дат;
- DAX для клонирования имеющейся таблицы дат.

> [!TIP]
> Таблица дат, возможно, является наиболее согласованной функцией, которая будет добавлена в любую из ваших моделей. Более того, в организации таблица дат должна быть определена согласованно. Поэтому мы рекомендуем создать [шаблон Power BI Desktop](../create-reports/desktop-templates.md), включающий в себя полностью настроенную таблицу дат. Поделитесь шаблоном со всеми разработчиками моделей в вашей организации. Таким образом, каждый раз, когда кто-то разрабатывает новую модель, он может начать с согласованно определенной таблицы дат.

## <a name="use-auto-datetime"></a>Использование функции "Автоматические дата и время"

Функция [Автоматические дата и время](../transform-model/desktop-auto-date-time.md) обеспечивает удобную, быструю и простую в использовании логику операций со временем. Авторы отчетов могут работать с логикой операций со временем при фильтрации, группировании и детализации в определенные календарные периоды.

При работе с календарными периодами, а также при наличии упрощенных требований к модели в отношении времени рекомендуется всегда включать параметр "Автоматические дата и время". Кроме того, использовать этот параметр удобно при создании специализированных моделей, а также при просмотре или профилировании данных. Однако при таком подходе не поддерживается разработка одной таблицы дат, которая может распространять фильтры на несколько таблиц. Дополнительные сведения см. на странице [Автоматические дата и время в Power BI Desktop](auto-date-time.md).

## <a name="connect-with-power-query"></a>Подключение с помощью Power Query

Если источник данных уже содержит таблицу дат, рекомендуется использовать ее в качестве источника для таблицы дат модели. Обычно это необходимо при подключении к хранилищу данных, так как оно будет содержать таблицу измерения даты. Таким образом, ваша модель использует единый источник достоверной информации для времени в вашей организации.

Если вы разрабатываете модель DirectQuery, а источник данных не содержит таблицу дат, настоятельно рекомендуем добавить таблицу дат в источник данных. Она должна соответствовать всем требованиям к моделировании таблицы дат. Затем можно использовать Power Query для подключения к таблице дат. Таким образом, в вычислениях модели могут использоваться возможности логики операций со временем DAX.

## <a name="generate-with-power-query"></a>Создание таблицы дат с помощью Power Query

Таблицу дат можно создать с помощью Power Query. Ниже приведены две записи в блоге, в которых показано, как это сделать.

- [Создание измерения даты с помощью скрипта Power Query](https://www.mattmasson.com/2014/02/creating-a-date-dimension-with-a-power-query-script/) от Мэтта Мэссона (Matt Masson).
- [Создание таблицы измерения даты в Power Query](https://blog.crossjoin.co.uk/2013/11/19/generating-a-date-dimension-table-in-power-query/) от Криса Вебба (Chris Webb).

> [!TIP]
> Если у вас нет определения хранилища данных или другого согласованного определения времени в вашей организации, рекомендуем использовать Power Query для публикации [потока данных](../transform-model/service-dataflows-overview.md). Затем подключите всех разработчиков моделей данных к потоку данных, чтобы добавить таблицы дат в модели. Поток данных станет единым источником достоверной информации для времени в вашей организации.

Если необходимо создать таблицу дат, рекомендуется сделать это с помощью DAX. Это может быть проще для вас. Более того, это будет удобней, так как DAX включает некоторые встроенные средства аналитики для упрощения создания таблиц дат и управления ими.

## <a name="generate-with-dax"></a>Создание таблицы дат с помощью DAX

Таблицу дат в модели можно сгенерировать, создав вычисляемую таблицу с помощью функций DAX [CALENDAR](/dax/calendar-function-dax) или [CALENDARAUTO](/dax/calendarauto-function-dax). Каждая функция возвращает таблицу дат с одним столбцом. Затем вычисляемую таблицу можно расширить с помощью вычисляемых столбцов, чтобы обеспечить поддержку требований к фильтрации и группированию по интервалу дат.

- Используйте функцию **CALENDAR**, если требуется определить диапазон дат. Вы передаете два значения: дату начала и дату окончания. Эти значения могут быть определены другими функциями DAX, такими как `MIN(Sales[OrderDate])` или `MAX(Sales[OrderDate])`.
- Используйте функцию **CALENDARAUTO**, если вы хотите, чтобы диапазон дат автоматически охватывал все даты, хранящиеся в модели. Вы можете передать один необязательный параметр, который является конечным месяцем года (не нужно передавать значение, если ваш год является календарным годом, который заканчивается в декабре). Это полезная функция, поскольку она гарантирует возврат полных годов дат (требование для помеченной таблицы дат). Более того, вам не нужно управлять расширением таблицы на будущие годы: после завершения обновления данных запускается повторное вычисление таблицы. Повторное вычисление будет автоматически расширять диапазон дат таблицы, когда в модель загружаются даты нового года.

## <a name="clone-with-dax"></a>Клонирование с помощью DAX

Если в модели уже есть таблица дат и требуется дополнительная таблица, ее можно легко клонировать. Это необходимо в том случае, когда дата представляет собой [ролевое измерение](star-schema.md#role-playing-dimensions). Вы можете клонировать таблицу, создав вычисляемую таблицу. Выражение вычисляемой таблицы — это просто имя имеющейся таблицы дат.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения, связанные с темой этой статьи, см. в следующих ресурсах.

- [Автоматические дата и время в Power BI Desktop](../transform-model/desktop-auto-date-time.md)
- [Автоматические дата и время в Power BI Desktop](auto-date-time.md)
- [Настройка и использование таблиц дат в Power BI Desktop](../transform-model/desktop-date-tables.md)
- [Самостоятельная подготовка данных в Power BI](../transform-model/service-dataflows-overview.md)
- [Функция CALENDAR (DAX)](/dax/calendar-function-dax)
- [Функция CALENDARAUTO (DAX)](/dax/calendarauto-function-dax)
- Вопросы? [Задайте их в сообществе Power BI](https://community.powerbi.com/).
- У вас есть предложения? [Идеи по улучшению Power BI](https://ideas.powerbi.com/)
