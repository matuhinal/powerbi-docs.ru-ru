---
title: Мониторинг производительности отчетов в Power BI
description: Рекомендации по мониторингу производительности отчетов в Power BI.
author: peter-myers
manager: asaxton
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 02/16/2020
ms.author: v-pemyer
ms.openlocfilehash: 9245dd6c25917b2c8c861ea5b83710cd8b52bb22
ms.sourcegitcommit: 0e9e211082eca7fd939803e0cd9c6b114af2f90a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/13/2020
ms.locfileid: "83279027"
---
# <a name="monitor-report-performance-in-power-bi"></a>Мониторинг производительности отчетов в Power BI

Примените для мониторинга производительности отчетов в Power BI Desktop [приложение метрик Power BI Premium](../admin/service-premium-metrics-app.md), выясните все проблемы и узнайте, как повысить производительность отчета.

Мониторинг производительности полезен в следующих ситуациях:

- слишком долго обновляется модель импорта данных;
- медленно работают отчеты DirectQuery или отчеты на основе динамических подключений;
- медленно выполняются вычисления модели.

Медленно работающие запросы или визуальные элементы отчета должны подвергаться непрерывной оптимизации.

## <a name="use-query-diagnostics"></a>Использование диагностики запросов

[Диагностика запросов](/power-query/QueryDiagnostics) в Power BI Desktop позволяет определить, что делает Power Query при предварительном просмотре и (или) применении запросов. Кроме того, функция _Диагностика шага_ позволяет записать подробную оценочную информацию по каждому шагу запроса. Результаты становятся доступными в Power Query, и к ним можно применять преобразования, чтобы лучше разобраться в выполнения запросов.

> [!NOTE]
> Диагностика запросов в настоящее время предоставляется в режиме предварительной версии, поэтому ее необходимо отдельно включить в _разделе параметров_. После включения соответствующие команды становятся доступными в окне Редактора Power Query на вкладке ленты**Средства**.

![На рисунке показана вкладка ленты "Средства" в Редакторе Power Query. На ленте отображаются команды "Диагностика шага", "Начать диагностику" и "Остановить диагностику".](media/monitor-report-performance/power-query-diagnotics.png)

## <a name="use-performance-analyzer"></a>Использование Анализатора производительности

В [Анализаторе производительности](../create-reports/desktop-performance-analyzer.md) Power BI Desktop можно узнать о производительности каждого из элементов отчета, например о визуальных элементах и формулах DAX. Особенно полезно определить, сам запрос или визуальная отрисовка создают проблемы с производительностью.

## <a name="use-sql-server-profiler"></a>Использование SQL Server Profiler

Можно также выявить медленные запросы с помощью приложения [SQL Server Profiler](/sql/tools/sql-server-profiler/sql-server-profiler).

> [!NOTE]
> SQL Server Profiler предоставляется в составе [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms).

SQL Server Profiler будет полезен в тех случаях, когда источником данных является что-либо из следующего:

- SQL Server
- Службы SQL Server Analysis Services
- Azure Analysis Services

> [!CAUTION]
> Power BI Desktop поддерживает подключение к порту диагностики. Порт диагностики позволяет подключать другие инструменты для выполнения трассировки в целях диагностики. Внесение изменений в модель данных Power Desktop не поддерживается. Любые изменения этой модели могут привести к повреждению и (или) потере данных.

Чтобы создать трассировку SQL Server Profiler, выполните следующую процедуру.

1. Откройте отчет Power BI Desktop (чтобы на следующем шаге было легче найти нужный порт, закройте все остальные отчеты).
1. Чтобы выяснить, какой порт используется в Power BI Desktop, введите следующую команду в PowerShell с правами администратора или в обычной командной строке.
    ```powershell
    netstat -b -n
    ```
    Выходные данные будут содержать полный список приложений и открытых для них портов. Найдите порт, используемый файлом **msmdsrv.exe**, и запишите его для дальнейшего использования. Это процесс вашего экземпляра Power BI Desktop.
1. Чтобы подключить SQL Server Profiler к Power BI Desktop, выполните следующее.
    1. Откройте SQL Server Profiler.
    1. В SQL Server Profiler откройте пункты меню _Файл_, _Новая трассировка_.
    1. На странице **Тип сервера** выберите _Analysis Services_.
    1. В поле **Имя сервера** введите значение _localhost:[записанный ранее порт]_ .
    1. Щелкните _Выполнить_. Теперь трассировка SQL Server Profiler выполняется и активно профилирует запросы Power BI Desktop.
1. По мере выполнения запросов Power BI Desktop вы будете получать сведения о времени их выполнения и затраченного времени ЦП. В зависимости от типа источника данных могут предоставляться и другие события с информацией о выполнении запроса. Эти данные помогут вам определить, какие запросы ограничивают производительность.

Преимущество использования SQL Server Profiler заключается в том, что он умеет сохранять трассировку для реляционной базы данных SQL Server. Эту трассировку можно передать в качестве входных данных в [помощник по настройке ядра СУБД](/sql/relational-databases/performance/start-and-use-the-database-engine-tuning-advisor). Это позволит получить рекомендации по настройке этого источника данных.

## <a name="monitor-premium-metrics"></a>Мониторинг метрик категории "Премиум"

Что касается возможностей Power BI Premium, вы можете применить **приложение метрик Power BI Premium** для мониторинга состояния и возможностей подписки Power BI Premium. Дополнительные сведения см. в статье [о приложении метрик Power BI Premium](../admin/service-premium-metrics-app.md).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения по этим вопросам см. в следующих ресурсах.

- [Диагностика запросов](/power-query/QueryDiagnostics)
- [Анализатор производительности](../create-reports/desktop-performance-analyzer.md)
- [Устранение неполадок с производительностью отчетов в Power BI](report-performance-troubleshoot.md)
- [Приложение Power BI Premium Metrics](../admin/service-premium-metrics-app.md)
- У вас появились вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)
- У вас есть предложения? [Идеи по улучшению Power BI](https://ideas.powerbi.com/)
