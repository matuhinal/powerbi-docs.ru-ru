---
title: Вложенные отчеты в отчетах Power BI с разбивкой на страницы
description: В этой статье вы узнаете о поддерживаемых источниках данных для отчетов с разбивкой на страницы в службе Power BI и о подключении к источникам данных базы данных SQL Azure.
author: maggiesMSFT
ms.author: maggies
ms.reviewer: ''
ms.service: powerbi
ms.subservice: report-builder
ms.topic: how-to
ms.date: 04/29/2020
ms.openlocfilehash: 9ced88289b2170d503a8394d5b83175659178e85
ms.sourcegitcommit: eef4eee24695570ae3186b4d8d99660df16bf54c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2020
ms.locfileid: "85239592"
---
# <a name="subreports-in-power-bi-paginated-reports"></a>Вложенные отчеты в отчетах Power BI с разбивкой на страницы

*Вложенный отчет* представляет собой элемент отчета с разбивкой на страницы, отображающий другой отчет с разбивкой на страницы в тексте главного отчета с разбивкой по страницам. Концептуально вложенный отчет в отчете напоминает фрейм на веб-странице. Он используется для внедрения отчета в другой отчет. В качестве вложенного отчета можно использовать любой отчет. Хранится отчет, отображаемый в качестве вложенного отчета, в той же рабочей области Премиум, что и родительский отчет. Можно настроить родительский отчет таким образом, чтобы он передавал вложенному отчету параметры. Вложенный отчет может повторяться в пределах областей данных с использованием параметра для фильтрации данных в каждом экземпляре вложенного отчета.  
  
 ![Вложенный отчет в отчете с разбивкой на страницы](media/subreports/paginated-report-subreport.png "Вложенный отчет отчета с разбивкой на страницы")  
  
 На данной иллюстрации контактная информация, отображаемая в главном заказе на продажу, на самом деле поступает из вложенного отчета «Контакты».  
  
Вы создаете и изменяете файлы определения отчета с разбивкой на страницы (RDL) в Power BI Report Builder. Вы можете отправить вложенные отчеты, хранящиеся в службах SQL Server Reporting Services, в рабочую область Premium в службе Power BI. Основные и вложенные отчеты должны быть опубликованы в той же рабочей области. Установите [Power BI Report Builder](https://aka.ms/pbireportbuilder).
  
## <a name="work-with-report-builder-and-the-power-bi-service"></a>Работа с Report Builder и службой Power BI

Power BI Report Builder может работать с отчетами с разбивкой на страницы на компьютере (называемыми локальными отчетами) или с отчетами в службе Power BI.  При первом открытии Report Builder вам будет предложено войти в учетную запись Power BI. Выберите **Войти** в правом верхнем углу.

:::image type="content" source="media/subreports/report-builder-sign-in.png" alt-text="Войдите в Power BI":::

После входа вы увидите вариант **Службы Power BI**  в Power BI Report Builder для пунктов меню **Открыть** и **Сохранить как** в меню **Файл**. При выборе параметра **Power BI Service**  для сохранения отчета создается активное подключение между Power BI Report Builder и службой Power BI. 

:::image type="content" source="media/subreports/report-builder-subreport-open-service.png" alt-text="Открытие из службы Power BI":::

## <a name="save-a-local-report-to-the-power-bi-service"></a>Сохраните локальный отчет в службе Power BI

Прежде чем можно будет добавить вложенный отчет в основной отчет, сначала создайте два отчета и сохраните их в той же рабочей области Power BI Premium. 

1. Чтобы открыть существующий локальный отчет, в меню **Файл** выберите пункт **Открыть** > **Этот компьютер** и выберите RDL-файл.  

2. В меню **Файл** выберите пункт **Сохранить как** > **Служба Power BI**.  См. подробности в статье [Публикация отчета с разбивкой на страницы в службе Power BI](paginated-reports-save-to-power-bi-service.md).

    > [!NOTE]
    > Также можно отправить отчет, начав со службы Power BI. См. подробности в той же статье [Публикация отчета с разбивкой на страницы в службе Power BI](paginated-reports-save-to-power-bi-service.md).

3. В диалоговом окне **Сохранить как** выберите рабочую область Power BI Premium, в которой можно хранить отчеты с разбивкой на страницы.  Такие рабочие области отмечены значком в виде бриллианта ![значок в виде бриллианта Premium](media/subreports/report-builder-premium-diamond.png) рядом с именем рабочей области.

    :::image type="content" source="media/subreports/report-builder-subreport-save-as-service.png" alt-text="Сохранить как в службу Power BI":::

4. Нажмите кнопку **Сохранить**.

## <a name="add-a-subreport-to-a-report"></a>Добавление вложенного отчета в отчет

Теперь, когда оба отчета сохранены в одной рабочей области Premium, можно добавить один в другой как вложенный отчет. Существует два способа добавления вложенного отчета. 

1. На ленте **Вставить** нажмите кнопку **Вложенный отчет** или щелкните правой кнопкой мыши холст отчета и выберите **Вставить** > **Вложенный отчет**.

    :::image type="content" source="media/subreports/report-builder-insert-subreport.png" alt-text="Вставка вложенного отчета в отчет":::

    Откроется диалоговое окно **Свойства вложенного отчета**.  

2. Нажмите кнопку **Обзор** > перейдите к отчету, который необходимо использовать в качестве вложенного отчета > укажите имя вложенного отчета в текстовом поле **Название**.

3. При необходимости настройте другие свойства, включая [параметры](#use-parameters-in-subreports).

## <a name="use-parameters-in-subreports"></a>Использование параметров во вложенных отчетах  
 Чтобы передать во вложенный отчет параметры из родительского отчета, определите параметр отчета в отчете, который используется в качестве вложенного. При включении вложенного отчета в родительский можно выбрать параметр отчета и значение, которое будет передаваться из родительского отчета параметру вложенного отчета.  
  
> [!NOTE]  
> Параметр, выбираемый из вложенного отчета, должен представлять собой параметр *отчета*, а не параметр *запроса*.  
  
 Вложенный отчет можно поместить в основную часть отчета или в область данных. Если поместить вложенный отчет в область данных, он будет повторяться с каждым экземпляром группы или строки в области данных. Можно передать значение из группы или строки во вложенный отчет. Используйте в свойстве значения вложенного отчета выражение поля для поля, содержащего значение, которое необходимо передать в качестве параметра вложенного отчета.  
  
 Дополнительные сведения о работе с параметрами и вложенными отчетами см. в разделе [Добавление вложенного отчета и параметров](https://docs.microsoft.com/sql/reporting-services/report-design/add-a-subreport-and-parameters-report-builder-and-ssrs) в документации по SQL Server Reporting Services.  

## <a name="preview-paginated-reports-in-report-builder"></a>Предварительный просмотр отчетов с разбивкой на страницы в Report Builder

Вы можете просмотреть свои отчеты в Report Builder.

- На ленте **Главная** выберите **Запустить**. 

Поскольку Report Builder является средством проектирования, предварительный просмотр отчета может выглядеть иначе, чем при подготовке отчета к просмотру в службе Power BI.

### <a name="notes-about-previewing"></a>Примечания о предварительном просмотре

- Построитель отчетов не сохраняет учетные данные для источников данных, используемых в отчетах.  Построитель отчетов запрашивает каждый набор учетных данных во время предварительной версии.  
- Если источники данных отчета находятся в локальной среде, необходимо настроить шлюз после сохранения отчета в рабочей области Power BI.
- Если построитель отчетов обнаруживает ошибку во время предварительного просмотра, он возвращает общее сообщение.  Если ошибку трудно отладить, рассмотрите возможность подготовки отчета к просмотру в службе Power BI.  

## <a name="considerations"></a>Ограничения

### <a name="maintaining-the-connection"></a>Поддержка соединения

Report Builder не сохраняет подключение к Power BI при закрытии файла.  Можно работать с локальным главным отчетом с вложенными отчетами, которые хранятся в рабочей области Power BI. Перед закрытием отчета обязательно сохраните основной отчет в рабочей области Power BI.  В противном случае во время предварительного просмотра может появиться сообщение "не найдено", так как отсутствует активное подключение к службе Power BI.  В этом случае перейдите к вложенному отчету и выберите его свойства.  Снова откройте вложенный отчет в службе Power BI.  При этом подключение будет восстановлено, а все прочие вложенные отчеты станут доступны.

### <a name="renaming-a-subreport"></a>Переименование вложенного отчета

Если вы переименовали вложенный отчет в рабочей области, необходимо исправить ссылку на имя в основном отчете. В противном случае вложенный отчет не будет отображаться. Основной отчет по-прежнему отображается с сообщением об ошибке внутри элемента вложенного отчета.

## <a name="migrate-large-reports"></a>Перенос больших отчетов

При переносе больших отчетов в Power BI рекомендуется использовать средство [RdlMigration tool](../guidance/migrate-ssrs-reports-to-power-bi.md).  Средство RdlMigration было обновлено для управления дублирующимися именами вложенных отчетов.  Дублирующиеся имена вложенных отчетов могут возникать, когда два или более отчетов имеют одно и то же имя, но находятся в разных подкаталогах.  Если имена не разрешены уникальным образом, распознается только первый вложенный отчет.

Если вы хотите использовать построитель отчетов для переноса больших отчетов, рекомендуется начать работу с вложенных отчетов. Сохраните каждый из них в рабочей области Power BI, чтобы предотвратить дублирование имен отчетов.

## <a name="share-reports-with-subreports"></a>Совместное использование отчетов с вложенными отчетами

Как мы уже упоминали, основной отчет и вложенные отчеты должны находиться в одной рабочей области. В противном случае вложенный отчет не будет отображаться. При совместном использовании основного отчета также необходимо предоставить общий доступ к вложенным отчетам. Если вы предоставляете общий доступ к основному отчету в приложении, убедитесь, что вы также включили в это приложение вложенные отчеты. Если вы предоставляете общий доступ к основному отчету пользователям или группам пользователей напрямую, убедитесь, что вы также предоставляете общий доступ к каждому вложенному отчету с одним и тем же набором пользователей или групп пользователей.
  
## <a name="next-steps"></a>Дальнейшие действия

[Устранение неполадок вложенных отчетов в отчетах Power BI с разбивкой на страницы](subreports-troubleshoot.md)

[Просмотр отчета с разбивкой на страницы в службе Power BI](../consumer/paginated-reports-view-power-bi-service.md)

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](https://community.powerbi.com/)
