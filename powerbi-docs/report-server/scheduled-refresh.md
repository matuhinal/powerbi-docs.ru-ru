---
title: Запланированное обновление отчета Power BI в решении "Сервер отчетов Power BI"
description: Запланированное обновление для отчетов Power BI позволяет использовать актуальные данные для отчета с внедренной моделью.
author: maggiesMSFT
ms.reviewer: kayu
ms.service: powerbi
ms.subservice: powerbi-report-server
ms.topic: conceptual
ms.date: 01/09/2020
ms.author: maggies
ms.openlocfilehash: 710df5f4159f49884d9eee1044b2c077c7edcb88
ms.sourcegitcommit: 6bc66f9c0fac132e004d096cfdcc191a04549683
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2020
ms.locfileid: "91749099"
---
# <a name="power-bi-report-scheduled-refresh-in-power-bi-report-server"></a>Запланированное обновление отчета Power BI в решении "Сервер отчетов Power BI"
Запланированное обновление дает возможность использовать актуальные данные для отчетов Power BI.

![Запланированное обновление в пределах решения "Сервер отчетов Power BI"](media/scheduled-refresh/scheduled-refresh-success.png)

Запланированное обновление можно реализовать для отчетов Power BI с внедренной моделью. Это означает, что вместо активного подключения или DirectQuery используется импорт данных. При импорте отчет отключен от исходного источника данных, и актуальность информации поддерживается за счет обновления. Запланированное обновление обеспечивает своевременное поступление новейших данных.

Настроить запланированное обновление можно в разделе управления отчета. Дополнительные сведения о настройке запланированного обновления см. в разделе [How to configure Power BI report scheduled refresh](configure-scheduled-refresh.md) (Как настроить запланированное обновление отчета Power BI).

## <a name="how-this-works"></a>Как это работает
Для запланированного обновления отчетов Power BI задействуется несколько компонентов.

* Агент SQL Server, который используется в качестве таймера и создает запланированные события.
* Запланированные задания добавляются в очередь событий и уведомлений в базе данных на сервере отчетов. В масштабном развертывании очередь является общей для всех серверов отчетов конфигурации.
* Вся обработка процессов, проводимая в результате запланированного события, выполняется как фоновый процесс.
* Модель данных загружается в экземпляре служб Analysis Services.
* Для некоторых источников данных используется подсистема гибридных веб-приложений Power Query. Она позволяет подключаться к источникам данных и выполнять преобразование. Другие источники данных могут быть подключены непосредственно из службы Analysis Services, в которой размещены модели данных для решения "Сервер отчетов Power BI".
* Новые данные загружаются в модель данных в службе Analysis Services.
* В конфигурации с горизонтальным масштабированием модель данных может быть реплицирована между узлами.
* Служба Analysis Services обрабатывает данные и выполняет все необходимые вычисления.

Решение "Сервер отчетов Power BI" поддерживает очередь событий для всех запланированных операций. Через регулярные интервалы времени производится опрос очереди для обнаружения новых событий. По умолчанию очередь просматривается с интервалом в 10 секунд. Можно изменить этот интервал, изменив параметры конфигурации **PollingInterval**, **IsNotificationService**и **IsEventService** в файле RSReportServer.config. Кроме того, можно использовать параметр **IsDataModelRefreshService**, чтобы указать, будет ли сервер отчетов обрабатывать запланированные события.

### <a name="analysis-services"></a>Службы Analysis Services
Для подготовки отчета Power BI и запланированного обновления нужно загрузить модель данных отчета Power BI в службе Analysis Services. Этот процесс в Analysis Services выполняется с помощью решения "Сервер отчетов Power BI".

## <a name="considerations-and-limitations"></a>Рекомендации и ограничения
### <a name="when-scheduled-refresh-cant-be-used"></a>Когда нельзя использовать запланированное обновление
Запланировать обновление можно не для всех отчетов Power BI. Ниже перечислены отчеты Power BI, для которых нельзя запланировать обновление.

* Отчет с одним или несколькими источниками данных в службе Analysis Services, которые используют активное подключение.
* Отчет с одним или несколькими источниками данных, которые используют DirectQuery.
* Отчет без источников данных. Например, отчет, данные которого вводятся вручную в окне *ввода данных*, или отчет только со статическим содержимым, таким как изображения, текст и т. д.

Кроме того, есть некоторые сценарии с источниками данных в режиме *импорта*, для которых нельзя создать планы обновления.

* Если используется источник данных *Файл* или *Папка* и путь к файлу является локальным (например, C:\Users\user\Documents), план обновления создать нельзя. Нужно использовать путь к расположению, к которому сервер отчетов может подключиться как к общей сетевой папке. Например, *\\myshare\Documents*.
* Если источник данных можно подключить с использованием только OAuth (например, Facebook, Google Analytics, Salesforce и т. д.), план обновления кэша создать нельзя. В настоящее время RS не поддерживает аутентификацию OAuth для любых источников данных — как для отчетов с разбивкой на страницы, так и для мобильных отчетов или отчетов Power BI.

### <a name="memory-limits"></a>Ограничения памяти
Рабочая нагрузка для сервера отчетов всегда была аналогична нагрузке веб-приложения. Возможность загрузки отчетов с помощью импорта данных или DirectQuery и запланированного обновления зависит от экземпляра служб Analysis Services, размещенного вместе с сервером отчетов. Это может привести к непредвиденной нехватке памяти на сервере. Планируя развертывание сервера учитывайте то, что служба Analysis Services может использовать память наряду с сервером отчетов.

Сведения о мониторинге экземпляра Analysis Services см. в статье [Наблюдение за экземпляром служб Analysis Services](/sql/analysis-services/instances/monitor-an-analysis-services-instance).

Сведения о параметрах памяти служб Analysis Services см. в статье [Свойства памяти](/sql/analysis-services/server-properties/memory-properties).

### <a name="data-model-size-limit"></a>Ограничение размера модели данных
Модель данных, загруженная во внутренний обработчик Analysis Services во время запланированного обновления, имеет максимальный размер 2000 МБ (2 ГБ). Этот максимальный размер не может быть настроен. Если размер модели данных превышает 2 ГБ, будет получена ошибка обновления "Длина результата превышает предельную длину (2 ГБ) целевого большого типа". В этом случае рекомендуется размещать модель в экземпляре Analysis Services и использовать активное подключение к модели в отчете.

## <a name="next-steps"></a>Дальнейшие действия
Настройте [запланированное обновление](configure-scheduled-refresh.md) для отчета Power BI.

Остались вопросы? [Попробуйте задать вопрос в сообществе Power BI.](https://community.powerbi.com/)