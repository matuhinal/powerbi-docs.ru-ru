---
title: Руководство по развертыванию шлюза данных для Power BI
description: Ознакомьтесь с рекомендациями по развертыванию шлюза для Power BI.
author: mgblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-gateways
ms.topic: conceptual
ms.date: 07/15/2019
ms.author: mblythe
LocalizationGroup: Gateways
ms.openlocfilehash: 5a0c29f04e7329373eec5f60af840e503ec22b3c
ms.sourcegitcommit: 73228d0a9038b8369369c059ad06168d2c5ff062
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2019
ms.locfileid: "68729992"
---
# <a name="guidance-for-deploying-a-data-gateway-for-power-bi"></a>Руководство по развертыванию шлюза данных для Power BI

[!INCLUDE [gateway-rewrite](includes/gateway-rewrite.md)]

Эта статья содержит руководство и рекомендации по развертыванию шлюза данных для Power BI в сетевой среде.

Сведения о том, как скачать, установить, настроить локальный шлюз данных и управлять им см. в статье [Что такое локальный шлюз данных](/data-integration/gateway/service-gateway-onprem). Кроме того, дополнительные сведения о локальном шлюзе данных и Power BI см. [в блоге по Microsoft Power](https://powerbi.microsoft.com/blog/) и на сайте [Сообщества Microsoft Power BI](https://community.powerbi.com/).

## <a name="installation-considerations-for-the-on-premises-data-gateway"></a>Рекомендации по установке локального шлюза данных

Прежде чем устанавливать локальный шлюз данных для облачной службы Power BI, следует принять во внимание несколько рекомендаций. Они описаны в следующих разделах.

### <a name="number-of-users"></a>Количество пользователей

Число пользователей, которые работают с отчетом, использующим шлюз — важная метрика, которую нужно учесть при выборе места установки шлюза. Ниже приведены некоторые вопросы, которые следует учесть.

* Будут ли пользователи работать с отчетами в разное время суток?
* Подключения какого типа они используют (DirectQuery или импорт)?
* Будут ли все пользователи работать с одним и тем же отчетом?

Если все пользователи каждый день работают с указанным отчетом в одно время, шлюз необходимо устанавливать на компьютере, который будет способен обрабатывать большое количество запросов. В следующих разделах приводятся сведения о счетчиках производительности и минимальных требованиях, которые помогут вам определить достаточную конфигурацию компьютера.

В Power BI поддерживается только *один* шлюз для одного *отчета*. Даже если отчет построен на основе нескольких источников данных, все эти источники должны проходить через один шлюз. Если панель мониторинга создана на основе *нескольких* отчетов, вы можете использовать отдельный шлюз для каждого из таких отчетов. Таким образом, вы распределяете нагрузку на шлюз между несколькими отчетами, которые используются в одной панели мониторинга.

### <a name="connection-type"></a>Тип подключения

В Power BI предлагается два типа подключения: DirectQuery и импорт. Некоторые источники данных могут не поддерживать оба эти типа подключения одновременно. Выбор способа подключения зависит от множества факторов, в том числе от требований к безопасности и производительности, ограничений, накладываемых на данные, а также размеров модели данных. Дополнительные сведения о типах подключения и поддерживаемых источниках данных приведены в статье [Список доступных типов источников данных](service-gateway-data-sources.md#list-of-available-data-source-types).

Выбранный тип подключения влияет на использование шлюза. Например, по возможности рекомендуется отделять источники данных DirectQuery от источников с запланированным обновлением. Предполагается, что они находятся в разных отчетах и могут быть разделены. Это предотвратит накопление в очереди шлюза тысяч запросов DirectQuery во время утреннего запланированного обновления модели данных большого размера, используемой для основной панели мониторинга организации. 

Вот что нужно учитывать для каждого типа:

* **Запланированное обновление**. В зависимости от размера запросов и числа обновлений, выполняемых ежедневно, вы можете не выходить за рамки минимальных рекомендуемых требований к оборудованию или модернизировать компьютер, чтобы повысить производительность. Если запрос не является свернутым, преобразования осуществляются на компьютере шлюза. Соответственно, для повышения производительности требуется больший объем оперативной памяти на компьютере шлюза.

* **DirectQuery**. Запрос отправляется при каждом открытии отчета или просмотре данных любым пользователем. Если ожидается, что к данным будут одновременно обращаться более 1000 пользователей, выбранный компьютер должен состоять из надежных и мощных деталей. Большее число ядер ЦП позволит повысить пропускную способность подключения DirectQuery.

Требования к установке компьютера см. в [соответствующем разделе для локального шлюза данных](/data-integration/gateway/service-gateway-install#requirements).

### <a name="location"></a>Расположение

Место установки шлюза может в значительной степени влиять на производительность обработки запросов. Чтобы свести к минимуму сетевую задержку, рекомендуется размещать шлюз, источник данных и клиент Power BI как можно ближе друг к другу. Чтобы определить расположение клиента Power BI, в службе Power BI щелкните значок **?** Значок в правом верхнем углу. Затем выберите **О Power BI**.

![Определение расположения клиента Power BI](media/service-gateway-deployment-guidance/powerbi-gateway-deployment-guidance_02.png)

Если вы планируете использовать шлюз Power BI с Azure Analysis Services, убедитесь, что области данных в обеих службах совпадают. Дополнительные сведения о настройке областей данных для нескольких служб см. в [этом видео](https://guyinacube.com/2018/01/power-bi-azure-analysis-services-gateway-data-region/).

## <a name="next-steps"></a>Дальнейшие действия

* [Настройка параметров прокси-сервера](/data-integration/gateway/service-gateway-proxy)  
* [Устранение неполадок со шлюзами — Power BI](service-gateway-onprem-tshoot.md)  
* [Вопросы и ответы о локальном шлюзе данных — Power BI](service-gateway-power-bi-faq.md)  

Появились дополнительные вопросы? Ответы на них см. в [сообществе Power BI](http://community.powerbi.com/).

