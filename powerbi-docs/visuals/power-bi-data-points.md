---
title: Большие наборы данных, стратегии данных и ограничения точек данных
description: Ограничения данных для визуализации и стратегии уменьшения объема данных
author: mihart
ms.reviewer: justyna
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: how-to
ms.date: 01/10/2020
ms.author: rien
LocalizationGroup: Visualizations
ms.openlocfilehash: 97bccec3ec0e92ebfcc6b9251cf5c17f176fbed1
ms.sourcegitcommit: eef4eee24695570ae3186b4d8d99660df16bf54c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/23/2020
ms.locfileid: "85240145"
---
# <a name="apply-data-point-limits-and-strategies-by-visual-type"></a>Применение ограничений точек данных и стратегии по шаблону визуализации

[!INCLUDE[consumer-appliesto-yyyn](../includes/consumer-appliesto-yyyn.md)]    

При отрисовке визуального элемента в Power BI визуализация должна быть быстрой и точной. Для этого требуются базовые алгоритмы, настроенные для каждого шаблона визуализации. Визуальные элементы в Power BI должны быть достаточно гибкими, чтобы обрабатывать наборы данных разных размеров. Некоторые наборы данных содержат лишь небольшое число точек данных, в то время как другие — целые петабайты. В этой статье объясняются стратегии, используемые Power BI для отрисовки визуализации.

## <a name="data-reduction-strategies"></a>Стратегии уменьшения объема данных
Каждый визуальный элемент применяет одну или несколько *стратегий уменьшения объема данных* для обработки потенциально больших объемов анализируемых данных. Даже обычная таблица использует такие стратегии, чтобы избежать загрузки всего набора данных в клиент.  Стратегии уменьшения используются в различных шаблонах визуализации. Для каждого визуального элемента в процессе формирования запроса на получение данных к серверу выбирается поддерживаемая *стратегия уменьшения объема данных*. 

Каждый визуальный элемент управляет параметрами стратегий, чтобы влиять на общий объем данных.   

## <a name="strategies"></a>Стратегии
Для каждой стратегии предусмотрены значения по умолчанию в зависимости от формы и типа визуализируемых данных. Эти значения можно переопределить на панели форматирования Power BI, чтобы обеспечить максимальное соответствие потребностям пользователя. 

* **Data Windowing** (Отображение данных в окне) (сегментация): пользователи могут прокручивать данные в визуальном элементе. Фрагменты данных будут постепенно загружаться из всего набора данных.
* **Ведущие N**: отображение только первых N элементов.
* **Simple Sample** (Простой пример): отображение первого, последнего элемента и N равномерно распределенных между ними элементов.
* **BottomN** (Последние N): отображение только последних N элементов.  Это полезно при мониторинге часто обновляемых данных.
* **High-density sampling** (Выборка с высокой плотностью) — улучшенный алгоритм выборки с более точным учетом выбросов и формы кривых.
    * **Binned line sampling** (Выборка с интервалов оси) — образцы точек ряда данных, взятые с выбросов на интервалах оси
    * **Overlapping points sampling** (Выборка перекрывающихся точек) — образцы точек данных с перекрывающимися значениями и сохранением выбросов.

## <a name="statistics"></a>Статистика
Некоторые модели предоставляют статистику о количестве значений в определенных столбцах. При наличии таких сведений мы используем их, чтобы улучшить балансировку между несколькими иерархиями, если визуальный элемент явным образом не переопределяет число значений для стратегии.

Дополнительные сведения см. в статье [What's New in Analysis Services](https://docs.microsoft.com/sql/analysis-services/what-s-new-in-analysis-services?view=sql-server-2017) (Новые возможности Analysis Services).

## <a name="dynamic-limits"></a>Динамические ограничения
Помимо вышеописанных стратегий визуальные элементы с двумя иерархиями группирования столбцов (ось и легенда или категория и серия) используют одну дополнительную стратегию, которая называется *динамические ограничения*.  Динамические ограничения предназначены для оптимальной балансировки точек данных. 

Они обеспечивают лучшую выборку точек для разреженных данных, чем статические ограничения. Например, визуализацию можно настроить на выбор 10 рядов по 100 категорий, что в сумме обеспечит 1000 точек. Однако фактически данные состоят из 20 рядов по 50 категорий.  Во время выполнения запроса динамическое ограничение выбирает все 20 рядов, чтобы заполнить 1000 точек запроса.

Динамические ограничения применяются автоматически, если сервер настроен так, как показано ниже:

* В Power BI Desktop с локальной службой SQL Server Analysis Services версии 2016 или более поздней [используются серверные возможности SuperDax](https://blogs.msdn.microsoft.com/analysisservices/2015/09/02/whats-new-in-microsoft-sql-server-analysis-services-tabular-models-in-sql-server-2016-ctp-2-3/).

* В Desktop и службе Power BI при использовании импортированной модели, прямых запросов, прямого подключения к службе или к AS PaaS. 

* В службе Power BI при подключении через локальный шлюз к локальной службе SQL Server Analysis Services нет возможности использовать динамические ограничения. Локальный шлюз не полностью поддерживает стратегию динамических ограничений, которая возвращает различные структуры результирующих наборов из локальной службы SQL Server Analysis Services.  

## <a name="strategies-and-data-point-limits-by-visual-type"></a>Стратегии и ограничения точек данных по шаблону визуализации

### <a name="area-chart"></a>диаграмма с областями;
Ознакомьтесь с разделом, который объясняет, [как работает выборка линий](../create-reports/desktop-high-density-sampling.md#how-the-new-line-sampling-algorithm-works).

### <a name="barcolumn-chart"></a>Гистограммы и столбчатые диаграммы
- В категориальном режиме
    - Категории: виртуализация окна, которое отображает 500 строк
    - Ряды: первые 60
    - В скалярном режиме (могут использоваться динамические ограничения).
        - Максимальное количество точек: 10 000
        - Категории: образец из 500 значений
        - Ряды: первые 20 значений

### <a name="card-multirow"></a>Карточки (многострочные) 
- Значения: виртуализация окна, которое отображает 200 строк

### <a name="combo-chart"></a>Комбинированная диаграмма
 Использует те же стратегии, что и столбчатые диаграммы. Обратите внимание, что в строках **комбинированной диаграммы** не используется алгоритм с высокой плотностью, применяемый в **графиках**.

### <a name="power-bi-visuals"></a>Визуальные элементы Power BI
Можно получить до 30 000 точек, но именно авторы визуальных элементов указывают, какие стратегии нужно использовать. Ограничение по умолчанию — 1000, однако автор визуального элемента может изменить его на 30 000 (максимальное значение).

### <a name="doughnut"></a>Кольцевая диаграмма
- Максимальное количество точек: 3500
- Группа: первые 500
- Сведения: первые 20

### <a name="filled-map-choropleth"></a>Картограммы (хороплет) 
Картограммы могут использовать статистику или динамические ограничения. Power BI пытается использовать сокращения в следующем порядке: динамические ограничения, статистика, конфигурация. 
- Максимальное количество точек: 10 000
- Категории: первые 500
- Ряды (при наличии X и Y): первые 20

### <a name="funnel"></a>Воронкообразная диаграмма
- Максимальное количество точек: 3500
- Категории: первые 3500

### <a name="kpi"></a>КПЭ
- Ось тренда
- Последние 3500

### <a name="line-chart"></a>График
Ознакомьтесь с разделом, который объясняет, [как работает выборка линий](../create-reports/desktop-high-density-sampling.md#how-the-new-line-sampling-algorithm-works).

### <a name="line-chart-high-density"></a>График с высокой плотностью
Ознакомьтесь со статьей о [выборке с высокой плотностью](../create-reports/desktop-high-density-sampling.md)

### <a name="map"></a>Карта 
- Максимальное количество точек: 3500

В зависимости от конфигурации карта может содержать такие элементы:
- Расположение: первые 3500
- Расположение, размер: первые 3500
- Расположение, агрегаты широты и долготы (+/- размер): первые 3500
- Широта, долгота: см. статью [Выборка с высокой плотностью в точечных диаграммах в Power BI](../create-reports/desktop-high-density-scatter-charts.md)
- Широта, долгота, размер: первые 3500
- Легенда, широта, долгота: см. статью [Выборка с высокой плотностью в точечных диаграммах в Power BI](../create-reports/desktop-high-density-scatter-charts.md)
- Легенда, широта, долгота, размер: первые 233 легенды, первые 15 обозначений широты и долготы (может использоваться статистика или динамические ограничения).
- Агрегаты расположения, легенды, широты и долготы (+/- размер): первые 233 расположения, первые 15 легенд (может использоваться статистика или динамические ограничения).

### <a name="matrix"></a>Матрица
- Строки: виртуализация окна, которое отображает 500 строк
- Столбцы: первые 100 сгруппированных столбцов 
- Значения: множественные значения не подпадают под сокращение данных

### <a name="powerapps-visual"></a>Визуальный элемент PowerApps
Можно получить до 30 000 точек, но именно авторы визуальных элементов указывают, какие стратегии нужно использовать. Ограничение по умолчанию — 1000, однако автор визуального элемента может изменить его на 30 000 (максимальное значение).

### <a name="radial-gauge"></a>Радиальный датчик
Стратегии уменьшения не используются

### <a name="slicer"></a>Срез
- Значения: виртуализация окна, которое отображает 200 строк

### <a name="scatter-chart-high-density"></a>Точечные диаграммы с высокой плотностью
Ознакомьтесь со статьей о [точечных диаграммах с высокой плотностью](https://docs.microsoft.com/power-bi/visuals/desktop-high-density-scatter-charts)

### <a name="pie"></a>Круговая
- Максимальное количество точек: 3500
- Группа: первые 500
- Сведения: первые 20

### <a name="r--python-visuals"></a>Визуализация с помощью инструментов R и Python
Максимальное количество — 150 000 строк. Если запрашивается больше строк, отображены будут только первые 150 000.

### <a name="ribbon-chart"></a>Ленточная диаграмма
- В категориальном режиме
    - Категории: виртуализация окна, которое отображает 500 строк.
    - Ряды: первые 60
    - В скалярном режиме (могут использоваться динамические ограничения).
        - Максимальное количество точек: 10 000
        - Категории: образец из 500 значений
        - Ряды: первые 20 значений

### <a name="shape-map-preview"></a>Сопоставитель фигур (предварительная версия)
Сопоставитель фигур может использовать статистику или динамические ограничения. 
- Максимальное количество точек: 1500
- Категории: первые 500

### <a name="table"></a>Таблица
- Значения: виртуализация окна, которое отображает 500 строк.

### <a name="tree-map-could-use-statistics-or-dynamic-limits"></a>Древовидная карта (может использоваться статистика или динамические ограничения)
- Максимальное количество точек: 3500
- Группа: первые 500
- Сведения: первые 20

### <a name="waterfall-chart"></a>Каскадная диаграмма
- Если только в контейнере категорий есть
    - Максимальное количество точек: 3500
    - Только категория — первые 3500
- При наличии и категории, и распределения
    - Категория: виртуализация окна, которое отображает 30 строк.
    - Распределение — 200 первых значений


## <a name="next-steps"></a>Дальнейшие действия
[Визуализации в отчетах Power BI](power-bi-report-visualizations.md)
