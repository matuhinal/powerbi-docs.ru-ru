---
title: Древовидные диаграммы в Power BI
description: Древовидные диаграммы в Power BI
author: mihart
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 05/05/2020
ms.author: rien
LocalizationGroup: Visualizations
ms.openlocfilehash: 189cc784577df277b0b0517253699ae06842b30c
ms.sourcegitcommit: a199dda2ab50184ce25f7c9a01e7ada382a88d2c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82866893"
---
# <a name="treemaps-in-power-bi"></a>Древовидные диаграммы в Power BI

[!INCLUDE[consumer-appliesto-nyyn](../includes/consumer-appliesto-nyyn.md)]

[!INCLUDE [power-bi-visuals-desktop-banner](../includes/power-bi-visuals-desktop-banner.md)]

Диаграмма дерево отображает иерархические данные в виде набора вложенных прямоугольников. Каждый уровень иерархии представлен цветным прямоугольником (ветвь), содержащим прямоугольники меньшего размера (листья). Power BI задает размер пространства внутри каждого прямоугольника на основе измеренного значения. Прямоугольники упорядочиваются по размеру: от верхнего левого (самый большой) до нижнего правого (самый маленький).

![Снимок экрана: количество продуктов по категориям и диаграмма "дерево" изготовителей.](media/power-bi-visualization-treemaps/pbi-nancy-viz-treemap.png)

Например, при анализе продаж у вас могут быть ветки верхнего уровня для категорий одежды: **Urban** (Городской стиль), **Rural** (Деревенский стиль), **Youth** (Молодежный стиль) и **Mix** (Смешанный стиль). Power BI разделит прямоугольники вашей категории на листья для производителей одежды в этой категории. Размер и заливка этих мелких прямоугольников будут основываться на объемах продаж.

В ветви **Urban** продано много одежды **VanArsdel**. Меньше было продано одежды**Natura** и **Fama**. И лишь несколько вещей было продано марки **Leo**. Таким образом, ветвь **Urban** на дереве содержит:

* Самый большой прямоугольник с именем **VanArsdel** в левом верхнем углу.

* Меньшие по размеру прямоугольники с именами **Natura** и **Fama**.

* Много других прямоугольников, представляющих прочие категории.

* Мелкий прямоугольник с именем **Leo**.

Итак, мы можем сравнить количество проданных товаров в разных группах, сравнив размер и заливку каждого листового узла: чем больше размер прямоугольника и темнее заливка, тем больше значение.


## <a name="when-to-use-a-treemap"></a>Сферы применения диаграмм дерева

Диаграмма дерево отлично подходит:

* для отображения больших объемов иерархических данных;

* когда линейчатая диаграмма не может эффективно обрабатывать большое количество значений;

* для отображения пропорций между каждой частью и целым;

* для отображения шаблонов распределения показателя на каждом уровне категорий в иерархии;

* для отображения атрибутов путем кодирования по размеру и цвету;

* для выделения шаблонов, выбросов, наиболее важных участников и исключений.

## <a name="prerequisite"></a>Необходимое условие

В этом руководстве используется пример PBIX-файла с примером [Анализ розничной торговли](https://download.microsoft.com/download/9/6/D/96DDC2FF-2568-491D-AAFA-AFDD6F763AE3/Retail%20Analysis%20Sample%20PBIX.pbix).

1. В верхнем левом разделе меню выберите **Файл** > **Открыть**.
   
2. Найдите свою копию PBIX-файла с примером **Анализ розничной торговли**.

1. Откройте PBIX-файл с примером **Анализ розничной торговли** в представлении отчета ![Снимок экрана: значок представления отчета](media/power-bi-visualization-kpi/power-bi-report-view.png).

1. Выбрать ![Снимок экрана: желтая вкладка,](media/power-bi-visualization-kpi/power-bi-yellow-tab.png) чтобы создать новую страницу.

> [!NOTE]
> Для предоставления общего доступа к отчету Power BI и вам, и коллеге необходимо иметь отдельные лицензии Power BI Pro или сохранить отчет в емкости Премиум.    



После получения набора данных **примера "Анализ розничной торговли"** вы сможете приступить к работе.

## <a name="create-a-basic-treemap"></a>Создание простой диаграммы дерева

Вы создаете отчет и добавляете простую диаграмму "дерево".


1. В области **Поля** выберите меру **Продажи** > **Продажи за прошлый год**.

   ![Снимок экрана: "Продажи > Продажи" за прошлый год и результирующий визуальный элемент.](media/power-bi-visualization-treemaps/treemapfirstvalue-new.png)

1. Выберите значок диаграммы "дерево" ![Снимок экрана: значок диаграммы "дерево"](media/power-bi-visualization-treemaps/power-bi-treemap-icon.png) для преобразования диаграммы в диаграмму "дерево".

   ![Снимок экрана: диаграмма "дерево" без конфигурации.](media/power-bi-visualization-treemaps/treemapconvertto-new.png)

1. Выберите пункт **Элемент** > **Категория**, который добавит **Категорию** в **Группу**.

    Power BI создаст диаграмму дерева, в которой размер прямоугольников отражает общий объем продаж, а цвет представляет категорию. По существу, вы создали иерархию, которая визуально описывает относительный размер общего объема продаж по категориям. Категория мужской одежды **Men** имеет самый большой объем продаж, а категория трикотажа **Hosiery** — самый маленький.

    ![Снимок экрана: диаграмма "дерево" после конфигурации.](media/power-bi-visualization-treemaps/power-bi-complete.png)

1. Выберите поле **Магазин** > **Сеть**, чтобы добавить **Сеть** в область **Сведения** и завершить создание диаграммы. Теперь можно сравнить продажи за прошлый год по категориям и сетям магазинов.

   ![Снимок экрана: диаграмма "дерево" и мера Store > Chain ("Магазин > Сеть магазинов") в области Details (Сведения).](media/power-bi-visualization-treemaps/power-bi-details.png)

   > [!NOTE]
   > Параметры "Насыщенность цвета" и "Сведения" невозможно использовать одновременно.

1. Наведите указатель на заголовок **Chain** (Сеть магазинов), чтобы увидеть подсказку для этой части области **Category**(Категория).

    Например, при наведении курсора на **Fashions Direct** в прямоугольнике **090-Home** всплывает подсказка для части Fashion Direct категории Home.

   ![Снимок экрана: всплывающая подсказка Home (Главная страница).](media/power-bi-visualization-treemaps/treemaphoverdetail-new.png)


## <a name="highlighting-and-cross-filtering"></a>Выделение и перекрестная фильтрация

Теперь можно выделить **категорию** или **сведения** в дереве диаграммы для перекрестного выделения и фильтрации других визуализаций на странице отчета. Чтобы продолжить, добавьте несколько визуальных элементов на эту же страницу либо скопируйте диаграмму "дерево" на одну из других страниц этого отчета. На рисунке ниже диаграмма дерева скопирована на страницу **Обзор**. 

1. На диаграмме "дерево" выберите **Category** (Категория) или **Chain** (Цепочка магазинов) в области **Category** (Категория). Это приведет к перекрестному выделению других визуализаций на странице. Например, при выборе категории **050-Shoes** видно, что продажи за последний год в категории "Обувь" составили **16 352 432 долл. США**, а доля продаж в категории**Fashions Direct** составила **2 174 185 долл. США**.

   ![Снимок экрана: отчет "Обзор продаж магазина" с перекрестной фильтрацией.](media/power-bi-visualization-treemaps/treemaphiliting.png)

1. В круговой диаграмме **Last Year Sales by Chain** (Продажи за прошлый год по сети магазинов) выберите сектор **Fashions Direct**, чтобы перекрестно фильтровать диаграмму в виде дерева.
   ![GIF-демонстрация функции перекрестной фильтрации.](media/power-bi-visualization-treemaps/treemapnoowl.gif)

1. Подробности о настройке перекрестной фильтрации в диаграммах см. в статье [Visualization interactions in a Power BI report](../service-reports-visual-interactions.md) (Взаимодействия визуализаций в отчете Power BI).

## <a name="next-steps"></a>Дальнейшие действия

* [Каскадные диаграммы в Power BI](power-bi-visualization-waterfall-charts.md)

* [Типы визуализаций в Power BI](power-bi-visualization-types-for-reports-and-q-and-a.md)
